import{c as t,d as e,e as n,f as r,A as i}from"./settings.bc92b9ed.js";import{m as o}from"./moment.7288240e.js";var a=t((function(t,e){var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();t.exports=e=n.fetch,n.fetch&&(e.default=n.fetch.bind(n)),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response}));function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var l=function(t,e){return s(void 0,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=JSON.stringify({query:t,variables:e}),[4,a("https://arweave.net/graphql",{method:"POST",headers:{"content-type":"application/json"},body:n})];case 1:return[4,r.sent().clone().json()];case 2:return[2,r.sent()]}}))}))},h=function(t){return s(void 0,void 0,void 0,(function(){var e,n,r;return u(this,(function(i){switch(i.label){case 0:return(e="undefined"!=typeof window)&&(r=JSON.parse(localStorage.getItem("gqlCache")||"{}"),t in r)?[2,JSON.parse(r[t])]:[4,l("query($id: ID!) {\n  transaction(id: $id) {\n    id\n    anchor\n    signature\n    recipient\n    owner {\n      address\n      key\n    }\n    fee {\n      winston\n      ar\n    }\n    quantity {\n      winston\n      ar\n    }\n    data {\n      size\n      type\n    }\n    tags {\n      name\n      value\n    }\n    block {\n      id\n      timestamp\n      height\n      previous\n    }\n    parent {\n      id\n    }\n  }\n}\n",{id:t})];case 1:return n=i.sent(),e&&n.data.transaction.block&&((r=JSON.parse(localStorage.getItem("gqlCache")||"{}"))[t]=n.data.transaction,localStorage.setItem("gqlCache",JSON.stringify(r))),[2,n.data.transaction]}}))}))},c=t((function(t,n){var r=e&&e.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function i(t,e,n,i,o=[],a="",s=""){return r(this,void 0,void 0,(function*(){let r=yield t.createTransaction({data:i},e);if(a&&s&&a.length&&+s>0&&(r=yield t.createTransaction({data:i,target:a.toString(),quantity:s.toString()},e)),o&&o.length)for(const t of o)r.addTag(t.name.toString(),t.value.toString());return r.addTag("App-Name","SmartWeaveContract"),r.addTag("App-Version","0.3.0"),r.addTag("Contract-Src",n),r.addTag("Content-Type","application/json"),yield t.transactions.sign(r,e),r}))}function o(t,e,n,i,o=[],a="",s=""){return r(this,void 0,void 0,(function*(){let r=yield t.createTransaction({data:i},e);if(a&&s&&a.length&&+s>0&&(r=yield t.createTransaction({data:i,target:a.toString(),quantity:s.toString()},e)),o&&o.length)for(const t of o)r.addTag(t.name.toString(),t.value.toString());r.addTag("App-Name","SmartWeaveContract"),r.addTag("App-Version","0.3.0"),r.addTag("Contract-Src",n),r.addTag("Content-Type","application/json"),yield t.transactions.sign(r,e);const u=yield t.transactions.post(r);if(200===u.status||208===u.status)return r.id;throw new Error("Unable to write Contract Initial State")}))}Object.defineProperty(n,"__esModule",{value:!0}),n.createContractFromTx=n.createContract=n.simulateCreateContractFromTx=n.simulateCreateContractFromSource=void 0,n.simulateCreateContractFromSource=function(t,e,n,o){return r(this,void 0,void 0,(function*(){const r=yield t.createTransaction({data:o},e);r.addTag("App-Name","SmartWeaveContractSource"),r.addTag("App-Version","0.3.0"),r.addTag("Content-Type","application/javascript"),yield t.transactions.sign(r,e);const a=(yield i(t,e,r.id,n)).reward;return r.reward=(parseFloat(r.reward)+parseFloat(a)).toString(),r}))},n.simulateCreateContractFromTx=i,n.createContract=function(t,e,n,i){return r(this,void 0,void 0,(function*(){const r=yield t.createTransaction({data:n},e);r.addTag("App-Name","SmartWeaveContractSource"),r.addTag("App-Version","0.3.0"),r.addTag("Content-Type","application/javascript"),yield t.transactions.sign(r,e);const a=yield t.transactions.post(r);if(200===a.status||208===a.status)return yield o(t,e,r.id,i);throw new Error("Unable to write Contract Source.")}))},n.createContractFromTx=o}));function d(t,e){if(Number.isInteger(e)){let t=new Uint8Array(16);new DataView(t.buffer).setBigUint64(0,BigInt(e),!0),e=t}if(e instanceof Uint8Array)switch(t){case"keccak256":default:throw new Error("not implemented yet")}throw new TypeError}class f extends Error{constructor(t){super(t),Object.setPrototypeOf(this,f.prototype)}}class m extends Error{constructor(t){super(""),this.value=t,Object.setPrototypeOf(this,m.prototype)}}function g(t){return t instanceof m}function p(t){return t===w}function v(t){return!(t instanceof m)}function y(t){return t!==w}const w=null;function M(t){return t}var b=Object.freeze({__proto__:null,SmartWeave:null,Panic:f,Err:m,requireVersion:function(t){},requireFeature:function(t){},add:function(...t){return t.reduce(((t,e)=>t+e),0)},sub:function(...t){return t.slice(1).reduce(((t,e)=>t-e),t[0])},mul:function(...t){return t.reduce(((t,e)=>t*e),1)},div:function(...t){return Math.trunc(t.slice(1).reduce(((t,e)=>t/e),t[0]))},lt:function(t,e){return t<e},le:function(t,e){return t<=e},gt:function(t,e){return t>e},ge:function(t,e){return t>=e},append:function(t,e){return[...t,e]},asContract:function(t){throw new Error("as-contract not supported")},asMaxLen:function(t,e){return t.length<=e?t:w},atBlock:function(t,e){throw new Error("not implemented yet")},blockHeight:function(){throw new Error("block-height not supported")},concat:function(t,e){if(t instanceof Array&&e instanceof Array)return[].concat(t,e);if(t instanceof Uint8Array&&e instanceof Uint8Array){const n=new Uint8Array(t.byteLength+e.byteLength);return n.set(t,0),n.set(e,t.byteLength),n}throw new TypeError},contractCall:function(t,e,...n){throw new Error("not implemented yet")},contractCaller:function(){throw new Error("contract-caller not supported")},contractOf:function(t){throw new Error("not implemented yet")},defaultTo:function(t,e){return null!=e?e:t},err:function(t){return new m(t)},filter:function(t,e){if(e instanceof Array)return e.filter(t);throw new TypeError},fold:function(t,e,n){if(e instanceof Array)return e.reduce(((e,n)=>t(n,e)),n);throw new TypeError},ftGetBalance:function(t,e){throw new Error("not implemented yet")},ftMint:function(t,e,n){throw new Error("not implemented yet")},ftTransfer:function(t,e,n,r){throw new Error("not implemented yet")},get:function(t,e){return p(e)?w:e.get(t)},getBlockInfo:function(t,e){throw new Error("not implemented yet")},hash160:function(t){if(Number.isInteger(t)){let e=new Uint8Array(16);new DataView(e.buffer).setBigUint64(0,BigInt(t),!0),t=e}if(t instanceof Uint8Array)throw new Error("not implemented yet");throw new TypeError},isEq:function(...t){if(t.length>0&&t.every((e=>typeof e==typeof t[0])))return t.every((e=>e===t[0]));throw new TypeError},isErr:g,isNone:p,isOk:v,isSome:y,keccak256:function(t){return d("keccak256",t)},len:function(t){return t.length},list:function(...t){if(t.length>0&&t.some((e=>typeof e!=typeof t[0])))throw new TypeError;return t},map:function(t,e){if(e instanceof Array)return e.map(t);throw new TypeError},mapDelete:function(t,e){return t.delete(e)},mapGet:function(t,e){const n=t.get(e);return n||w},mapInsert:function(t,e,n){return!t.has(e)&&(t.set(e,n),!0)},mapSet:function(t,e,n){return t.set(e,n),!0},match:function(t,e,n){return p(t)||g(t)?n(t):e(t)},mod:function(t,e){if(0===e)throw new RangeError("division by zero");return t%e},nftGetOwner:function(t,e){throw new Error("not implemented yet")},nftMint:function(t,e,n){throw new Error("not implemented yet")},nftTransfer:function(t,e,n,r){throw new Error("not implemented yet")},none:w,not:function(t){return!t},ok:function(t){return t},pow:function(t,e){return Math.pow(t,e)},print:function(t){return console.log(t),t},sha256:function(t){return d("sha256",t)},sha512:function(t){return d("sha512",t)},sha512_256:function(t){return d("sha512-256",t)},some:M,toInt:function(t){return t},toUint:function(t){return t},tryUnwrap:function(t){return y(t)||v(t)?t:g(t)?t.value:w},tuple:function(...t){return t.reduce(((t,[e,n])=>t.set(e,n)),new Map)},txSender:function(){throw new Error("tx-sender not supported")},unwrap:function(t,e){return p(t)||g(t)?e:t},unwrapErr:function(t,e){return g(t)?t.value:e},unwrapErrPanic:function(t){if(g(t))return t.value;throw new f("unwrapErrPanic")},unwrapPanic:function(t){if(p(t)||g(t))throw new f("unwrapPanic");return t},xor:function(t,e){return t^e}}),x=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.arrayToHex=e.formatTags=e.unpackTags=e.getTag=void 0,e.getTag=function(t,e){const n=t.get("tags");for(const t of n)try{if(t.get("name",{decode:!0,string:!0})===e)return t.get("value",{decode:!0,string:!0})}catch(t){}return!1},e.unpackTags=function(t){const e=t.get("tags"),n={};for(const t of e)try{const e=t.get("name",{decode:!0,string:!0}),r=t.get("value",{decode:!0,string:!0});if(!n.hasOwnProperty(e)){n[e]=r;continue}n[e]=[...n[e],r]}catch(t){}return n},e.formatTags=function(t){const e={};for(const n of t){const{name:t,value:r}=n;e.hasOwnProperty(t)?e[t]=[...e[t],r]:e[t]=r}return e},e.arrayToHex=function(t){let e="";for(const n of t)e+=("0"+n.toString(16)).slice(-2);return e},e.log=function(t,...e){t&&t.getConfig().api.logging&&("function"==typeof t.getConfig().api.logger?t.getConfig().api.logger(...e):console.log(...e))}})),S=t((function(t,n){var r=e&&e.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.execute=void 0,n.execute=function(t,e,n){return r(this,void 0,void 0,(function*(){try{const r=JSON.parse(JSON.stringify(n)),i=yield t(r,e);if(i&&(i.state||i.result))return{type:"ok",result:i.result,state:i.state||n};throw new Error(`Unexpected result from contract: ${JSON.stringify(i)}`)}catch(t){return"ContractError"===t.name?{type:"error",result:t.message,state:n}:{type:"exception",result:`${t&&t.stack||t&&t.message}`,state:n}}}))}})),T=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{constructor(t,e={}){e.message?super(e.message):super(),this.type=t,this.otherInfo=e}getType(){return this.type}}e.default=n})),E=t((function(t,n){var r=e&&e.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=e&&e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.readContract=void 0;const o=i(T);n.readContract=function(t,e,n,i){return r(this,void 0,void 0,(function*(){if(!n){const e=yield t.network.getInfo();n=e.height}const u=N.loadContract(t,e).catch((t=>{throw new o.default("CONTRACT_NOT_FOUND",{message:`Contract having txId: ${e} not found`,requestedTxId:e})})),l=function(t,e,n){return r(this,void 0,void 0,(function*(){let r={tags:[{name:"App-Name",values:["SmartWeaveAction"]},{name:"Contract",values:[e]}],blockFilter:{max:n},first:a},i=yield s(t,r);const o=i.edges.filter((t=>!t.node.parent||!t.node.parent.id));for(;i.pageInfo.hasNextPage;){const e=i.edges[99].cursor;r=Object.assign(Object.assign({},r),{after:e}),i=yield s(t,r),o.push(...i.edges.filter((t=>!t.node.parent||!t.node.parent.id)))}return o}))}(t,e,n).catch((t=>t)),[h,c]=yield Promise.all([u,l]);if(h instanceof Error)throw h;if(c instanceof Error)throw c;let d;try{d=JSON.parse(h.initState)}catch(t){throw new Error(`Unable to parse initial state for contract: ${e}`)}x.log(t,`Replaying ${c.length} confirmed interactions`),yield function(t,e){return r(this,void 0,void 0,(function*(){const n=e.map((e=>function(t,e){return r(this,void 0,void 0,(function*(){const{node:n}=e,r=t.utils.b64UrlToBuffer(n.block.id),i=t.utils.b64UrlToBuffer(n.id),o=t.utils.concatBuffers([r,i]),a=x.arrayToHex(yield t.crypto.hash(o)),s=`000000${n.block.height}`.slice(-12);e.sortKey=`${s},${a}`}))}(t,e)));yield Promise.all(n),e.sort(((t,e)=>t.sortKey.localeCompare(e.sortKey)))}))}(t,c);const{handler:f,swGlobal:m}=h,g={};for(const e of c){const n=x.formatTags(e.node.tags),r=Object.assign(Object.assign({},e.node),{tags:n});let i=r.tags.Input;if(Array.isArray(i)){console.warn(`Skipping tx with multiple Input tags - ${r.id}`);continue}try{i=JSON.parse(i)}catch(e){x.log(t,e);continue}if(!i){x.log(t,`Skipping tx with missing or invalid Input tag - ${r.id}`);continue}const o={input:i,caller:r.owner.address};m._activeTx=r;const a=yield S.execute(f,o,d);"exception"===a.type&&(x.log(t,`${a.result}`),x.log(t,`Executing of interaction: ${r.id} threw exception.`)),"error"===a.type&&(x.log(t,`${a.result}`),x.log(t,`Executing of interaction: ${r.id} returned error.`)),g[r.id]="ok"===a.type,d=a.state}return i?{state:d,validity:g}:d}))};const a=100;function s(t,e){return r(this,void 0,void 0,(function*(){const n=yield t.api.post("graphql",{query:"query Transactions($tags: [TagFilter!]!, $blockFilter: BlockFilter!, $first: Int!, $after: String) {\n    transactions(tags: $tags, block: $blockFilter, first: $first, sort: HEIGHT_ASC, after: $after) {\n      pageInfo {\n        hasNextPage\n      }\n      edges {\n        node {\n          id\n          owner { address }\n          recipient\n          tags {\n            name\n            value\n          }\n          block {\n            height\n            id\n          }\n          fee { winston }\n          quantity { winston }\n          parent { id }\n        }\n        cursor\n      }\n    }\n  }",variables:e});if(200!==n.status)throw new Error(`Unable to retrieve transactions. Arweave gateway responded with status ${n.status}.`);return n.data.data.transactions}))}})),k=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SmartWeaveGlobal=void 0;e.SmartWeaveGlobal=class{constructor(t,e){this.unsafeClient=t,this.arweave={ar:t.ar,utils:t.utils,wallets:t.wallets,crypto:t.crypto},this.contract=e,this.transaction=new n(this),this.block=new r(this),this.contracts={readContractState:(e,n)=>E.readContract(t,e,n||(this._isDryRunning?Number.POSITIVE_INFINITY:this.block.height))}}get _isDryRunning(){return!this._activeTx}};class n{constructor(t){this.global=t}get id(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.id}get owner(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.owner.address}get target(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.recipient}get tags(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.tags}get quantity(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.quantity.winston}get reward(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.fee.winston}}class r{constructor(t){this.global=t}get height(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.block.height}get indep_hash(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.block.id}}})),_=n(b),N=t((function(t,n){var i=e&&e.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=e&&e.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=e&&e.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},s=e&&e.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},u=e&&e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.createContractExecutionEnvironment=n.loadContract=void 0;const l=a(_),h=u(r);function c(t,e,n){const r=`\n    const [SmartWeave, BigNumber, clarity] = arguments;\n    clarity.SmartWeave = SmartWeave;\n    class ContractError extends Error { constructor(message) { super(message); this.name = 'ContractError' } };\n    function ContractAssert(cond, message) { if (!cond) throw new ContractError(message) };\n    ${e=(e=e.replace(/export\s+async\s+function\s+handle/gmu,"async function handle")).replace(/export\s+function\s+handle/gmu,"function handle")};\n    return handle;\n  `,i=new k.SmartWeaveGlobal(t,{id:n});return{handler:new Function(r)(i,h.default,l),swGlobal:i}}n.loadContract=function(t,e){return s(this,void 0,void 0,(function*(){const n=yield t.transactions.get(e),r=x.getTag(n,"Contract-Src"),i=x.getTag(n,"Min-Fee"),o=(yield t.transactions.get(r)).get("data",{decode:!0,string:!0});let a;if(x.getTag(n,"Init-State"))a=x.getTag(n,"Init-State");else if(x.getTag(n,"Init-State-TX")){a=(yield t.transactions.get(x.getTag(n,"Init-State-TX"))).get("data",{decode:!0,string:!0})}else a=n.get("data",{decode:!0,string:!0});const{handler:s,swGlobal:u}=c(t,o,e);return{id:e,contractSrc:o,initState:a,minFee:i,contractTX:n,handler:s,swGlobal:u}}))},n.createContractExecutionEnvironment=c})),A=t((function(t,n){var r=e&&e.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function i(t,e,n,i,o,a="",s="0"){return r(this,void 0,void 0,(function*(){let r=yield t.createTransaction({data:Math.random().toString().slice(-4)},e);if(a&&s&&a.length&&+s>0&&(r=yield t.createTransaction({data:Math.random().toString().slice(-4),target:a.toString(),quantity:s.toString()},e)),!i)throw new Error(`Input should be a truthy value: ${JSON.stringify(i)}`);if(o&&o.length)for(const t of o)r.addTag(t.name.toString(),t.value.toString());return r.addTag("App-Name","SmartWeaveAction"),r.addTag("App-Version","0.3.0"),r.addTag("Contract",n),r.addTag("Input",JSON.stringify(i)),yield t.transactions.sign(r,e),r}))}Object.defineProperty(n,"__esModule",{value:!0}),n.interactRead=n.interactWriteDryRun=n.interactWrite=void 0,n.interactWrite=function(t,e,n,o,a=[],s="",u=""){return r(this,void 0,void 0,(function*(){const r=yield i(t,e,n,o,a,s,u);return 200!==(yield t.transactions.post(r)).status?null:r.id}))},n.interactWriteDryRun=function(t,e,n,o,a=[],s="",u=""){return r(this,void 0,void 0,(function*(){const r=yield N.loadContract(t,n),l=yield E.readContract(t,n),h=yield t.wallets.getAddress(e),c={input:o,caller:h},{height:d,current:f}=yield t.network.getInfo(),m=yield i(t,e,n,o,a,s,u),g=x.unpackTags(m),p={id:m.id,owner:{address:h},recipient:m.target,tags:g,fee:{winston:m.reward},quantity:{winston:m.quantity},block:{height:d,id:f}};return r.swGlobal._activeTx=p,yield S.execute(r.handler,c,l)}))},n.interactRead=function(t,e,n,o,a=[],s="",u=""){return r(this,void 0,void 0,(function*(){const r=yield N.loadContract(t,n),l=yield E.readContract(t,n),h=e?yield t.wallets.getAddress(e):"",c={input:o,caller:h},{height:d,current:f}=yield t.network.getInfo(),m=yield i(t,e,n,o,a,s,u),g=x.unpackTags(m),p={id:m.id,owner:{address:h},recipient:m.target,tags:g,fee:{winston:m.reward},quantity:{winston:m.quantity},block:{height:d,id:f}};r.swGlobal._activeTx=p;return(yield S.execute(r.handler,c,l)).result}))}})),C=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.selectWeightedPstHolder=void 0,e.selectWeightedPstHolder=function(t){let e=0;for(const n of Object.keys(t))e+=t[n];const n={};for(const r of Object.keys(t))n[r]=t[r]/e;let r=0;const i=Math.random();for(const t of Object.keys(n))if(r+=n[t],i<=r&&n[t]>0)return t;throw new Error("Unable to select token holder")}})),O=t((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.smartweave=e.selectWeightedPstHolder=e.readContract=e.interactRead=e.interactWriteDryRun=e.interactWrite=e.loadContract=e.createContractFromTx=e.createContract=e.simulateCreateContractFromSource=e.simulateCreateContractFromTx=void 0,Object.defineProperty(e,"simulateCreateContractFromTx",{enumerable:!0,get:function(){return c.simulateCreateContractFromTx}}),Object.defineProperty(e,"simulateCreateContractFromSource",{enumerable:!0,get:function(){return c.simulateCreateContractFromSource}}),Object.defineProperty(e,"createContract",{enumerable:!0,get:function(){return c.createContract}}),Object.defineProperty(e,"createContractFromTx",{enumerable:!0,get:function(){return c.createContractFromTx}}),Object.defineProperty(e,"loadContract",{enumerable:!0,get:function(){return N.loadContract}}),Object.defineProperty(e,"interactWrite",{enumerable:!0,get:function(){return A.interactWrite}}),Object.defineProperty(e,"interactWriteDryRun",{enumerable:!0,get:function(){return A.interactWriteDryRun}}),Object.defineProperty(e,"interactRead",{enumerable:!0,get:function(){return A.interactRead}}),Object.defineProperty(e,"readContract",{enumerable:!0,get:function(){return E.readContract}}),Object.defineProperty(e,"selectWeightedPstHolder",{enumerable:!0,get:function(){return C.selectWeightedPstHolder}});const n={simulateCreateContractFromTx:c.simulateCreateContractFromTx,simulateCreateContractFromSource:c.simulateCreateContractFromSource,createContract:c.createContract,createContractFromTx:c.createContractFromTx,loadContract:N.loadContract,interactWrite:A.interactWrite,interactWriteDryRun:A.interactWriteDryRun,interactRead:A.interactRead,readContract:E.readContract,selectWeightedPstHolder:C.selectWeightedPstHolder};e.smartweave=n}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function R(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function I(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var $=function(t,e,n){var r=JSON.parse(localStorage.getItem(t)||"{}");r[e]=n,localStorage.setItem(t,JSON.stringify(r))},q=function(t,e){return R(void 0,void 0,void 0,(function(){var n;return I(this,(function(r){switch(r.label){case 0:return[4,l('\n        query($contract: [String!]!, $block: Int) {\n          transactions(\n            tags: [\n              { name: "App-Name", values: "SmartWeaveAction" }\n              { name: "Contract", values: $contract }\n            ]\n            first: 1\n            block: { max: $block }\n          ) {\n            edges {\n              node {\n                id\n              }\n            }\n          }\n        }    \n      ',{contract:t,block:e})];case 1:return[2,null===(n=r.sent().data.transactions.edges[0])||void 0===n?void 0:n.node.id]}}))}))},P=function(t,e,n){return R(void 0,void 0,void 0,(function(){var r,i,o,a,s,u;return I(this,(function(l){switch(l.label){case 0:return"undefined"!=typeof window?(i=q,o=[e],[4,t.network.getInfo()]):[3,4];case 1:return[4,i.apply(void 0,o.concat([l.sent().height]))];case 2:return r=l.sent(),a=JSON.parse(localStorage.getItem("smartweaveCache")||"{}"),e in a&&a[e].latest===r?(s=a[e].res,[2,n?s:s.state]):[4,O.readContract(t,e,void 0,!0)];case 3:return u=l.sent(),$("smartweaveCache",e,{latest:r,res:u}),[2,n?u:u.state];case 4:return[4,O.readContract(t,e,void 0,!0)];case 5:return u=l.sent(),[2,n?u:u.state]}}))}))};function F(t,e){return R(this,void 0,void 0,(function(){var n,r,i;return I(this,(function(o){switch(o.label){case 0:return(n="undefined"!=typeof window)&&(r=JSON.parse(localStorage.getItem("dataCache")||"{}"),e in r)?[2,r[e]]:[4,t.transactions.getData(e,{decode:!0,string:!0})];case 1:return i=o.sent(),n&&$("dataCache",e,i.toString()),[2,i.toString()]}}))}))}var U=n(Object.freeze({__proto__:null,default:{}})),D=t((function(t){!function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function r(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function i(t,e,n){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var o;"object"==typeof t?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{o=U.Buffer}catch(t){}function a(t,e,n){for(var r=0,i=Math.min(t.length,n),o=e;o<i;o++){var a=t.charCodeAt(o)-48;r<<=4,r|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return r}function s(t,e,n,r){for(var i=0,o=Math.min(t.length,n),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},i.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},i.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},i.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;n>=e;n-=6)i=a(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==e&&(i=a(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},i.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,a=o%r,u=Math.min(o,o-a)+n,l=0,h=n;h<u;h+=r)l=s(t,h,h+r,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var c=1;for(l=s(t,h,t.length,e),h=0;h<a;h++)c*=e;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function c(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var l=1;l<r;l++){for(var h=u>>>26,c=67108863&u,d=Math.min(l,e.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var m=l-f|0;h+=(a=(i=0|t.words[m])*(o=0|e.words[f])+c)/67108864|0,c=67108863&a}n.words[l]=0|c,u=0|h}return 0!==u?n.words[l]=0|u:n.length--,n.strip()}i.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],c=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?u[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var d=l[t],f=h[t];r="";var m=this.clone();for(m.negative=0;!m.isZero();){var g=m.modn(f).toString(t);r=(m=m.idivn(f)).isZero()?g+r:u[d-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(t,e){return n(void 0!==o),this.toArrayLike(o,t,e)},i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},i.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),h=this.clone();if(u){for(s=0;!h.isZero();s++)a=h.andln(255),h.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!h.isZero();s++)a=h.andln(255),h.iushrn(8),l[o-s-1]=a}return l},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},i.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},i.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},i.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},i.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,a=0;a<r.length;a++)o=(e=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<n.length;a++)o=(e=(0|n.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,n){var r,i,o,a=t.words,s=e.words,u=n.words,l=0,h=0|a[0],c=8191&h,d=h>>>13,f=0|a[1],m=8191&f,g=f>>>13,p=0|a[2],v=8191&p,y=p>>>13,w=0|a[3],M=8191&w,b=w>>>13,x=0|a[4],S=8191&x,T=x>>>13,E=0|a[5],k=8191&E,_=E>>>13,N=0|a[6],A=8191&N,C=N>>>13,O=0|a[7],R=8191&O,I=O>>>13,$=0|a[8],q=8191&$,P=$>>>13,F=0|a[9],U=8191&F,D=F>>>13,B=0|s[0],j=8191&B,W=B>>>13,L=0|s[1],V=8191&L,H=L>>>13,G=0|s[2],J=8191&G,z=G>>>13,Z=0|s[3],Y=8191&Z,X=Z>>>13,K=0|s[4],Q=8191&K,tt=K>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ht=0|s[8],ct=8191&ht,dt=ht>>>13,ft=0|s[9],mt=8191&ft,gt=ft>>>13;n.negative=t.negative^e.negative,n.length=19;var pt=(l+(r=Math.imul(c,j))|0)+((8191&(i=(i=Math.imul(c,W))+Math.imul(d,j)|0))<<13)|0;l=((o=Math.imul(d,W))+(i>>>13)|0)+(pt>>>26)|0,pt&=67108863,r=Math.imul(m,j),i=(i=Math.imul(m,W))+Math.imul(g,j)|0,o=Math.imul(g,W);var vt=(l+(r=r+Math.imul(c,V)|0)|0)+((8191&(i=(i=i+Math.imul(c,H)|0)+Math.imul(d,V)|0))<<13)|0;l=((o=o+Math.imul(d,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(v,j),i=(i=Math.imul(v,W))+Math.imul(y,j)|0,o=Math.imul(y,W),r=r+Math.imul(m,V)|0,i=(i=i+Math.imul(m,H)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,H)|0;var yt=(l+(r=r+Math.imul(c,J)|0)|0)+((8191&(i=(i=i+Math.imul(c,z)|0)+Math.imul(d,J)|0))<<13)|0;l=((o=o+Math.imul(d,z)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(M,j),i=(i=Math.imul(M,W))+Math.imul(b,j)|0,o=Math.imul(b,W),r=r+Math.imul(v,V)|0,i=(i=i+Math.imul(v,H)|0)+Math.imul(y,V)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(m,J)|0,i=(i=i+Math.imul(m,z)|0)+Math.imul(g,J)|0,o=o+Math.imul(g,z)|0;var wt=(l+(r=r+Math.imul(c,Y)|0)|0)+((8191&(i=(i=i+Math.imul(c,X)|0)+Math.imul(d,Y)|0))<<13)|0;l=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(S,j),i=(i=Math.imul(S,W))+Math.imul(T,j)|0,o=Math.imul(T,W),r=r+Math.imul(M,V)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(b,V)|0,o=o+Math.imul(b,H)|0,r=r+Math.imul(v,J)|0,i=(i=i+Math.imul(v,z)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,z)|0,r=r+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,X)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,X)|0;var Mt=(l+(r=r+Math.imul(c,Q)|0)|0)+((8191&(i=(i=i+Math.imul(c,tt)|0)+Math.imul(d,Q)|0))<<13)|0;l=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(k,j),i=(i=Math.imul(k,W))+Math.imul(_,j)|0,o=Math.imul(_,W),r=r+Math.imul(S,V)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(T,V)|0,o=o+Math.imul(T,H)|0,r=r+Math.imul(M,J)|0,i=(i=i+Math.imul(M,z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,z)|0,r=r+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,X)|0)+Math.imul(y,Y)|0,o=o+Math.imul(y,X)|0,r=r+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var bt=(l+(r=r+Math.imul(c,nt)|0)|0)+((8191&(i=(i=i+Math.imul(c,rt)|0)+Math.imul(d,nt)|0))<<13)|0;l=((o=o+Math.imul(d,rt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(A,j),i=(i=Math.imul(A,W))+Math.imul(C,j)|0,o=Math.imul(C,W),r=r+Math.imul(k,V)|0,i=(i=i+Math.imul(k,H)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,z)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,z)|0,r=r+Math.imul(M,Y)|0,i=(i=i+Math.imul(M,X)|0)+Math.imul(b,Y)|0,o=o+Math.imul(b,X)|0,r=r+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,tt)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,r=r+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,rt)|0)+Math.imul(g,nt)|0,o=o+Math.imul(g,rt)|0;var xt=(l+(r=r+Math.imul(c,ot)|0)|0)+((8191&(i=(i=i+Math.imul(c,at)|0)+Math.imul(d,ot)|0))<<13)|0;l=((o=o+Math.imul(d,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(R,j),i=(i=Math.imul(R,W))+Math.imul(I,j)|0,o=Math.imul(I,W),r=r+Math.imul(A,V)|0,i=(i=i+Math.imul(A,H)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,z)|0,r=r+Math.imul(S,Y)|0,i=(i=i+Math.imul(S,X)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,X)|0,r=r+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,tt)|0,r=r+Math.imul(v,nt)|0,i=(i=i+Math.imul(v,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0,r=r+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,at)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,at)|0;var St=(l+(r=r+Math.imul(c,ut)|0)|0)+((8191&(i=(i=i+Math.imul(c,lt)|0)+Math.imul(d,ut)|0))<<13)|0;l=((o=o+Math.imul(d,lt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(q,j),i=(i=Math.imul(q,W))+Math.imul(P,j)|0,o=Math.imul(P,W),r=r+Math.imul(R,V)|0,i=(i=i+Math.imul(R,H)|0)+Math.imul(I,V)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,z)|0,r=r+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,X)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,X)|0,r=r+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,r=r+Math.imul(M,nt)|0,i=(i=i+Math.imul(M,rt)|0)+Math.imul(b,nt)|0,o=o+Math.imul(b,rt)|0,r=r+Math.imul(v,ot)|0,i=(i=i+Math.imul(v,at)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,at)|0,r=r+Math.imul(m,ut)|0,i=(i=i+Math.imul(m,lt)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,lt)|0;var Tt=(l+(r=r+Math.imul(c,ct)|0)|0)+((8191&(i=(i=i+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((o=o+Math.imul(d,dt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,j),i=(i=Math.imul(U,W))+Math.imul(D,j)|0,o=Math.imul(D,W),r=r+Math.imul(q,V)|0,i=(i=i+Math.imul(q,H)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,H)|0,r=r+Math.imul(R,J)|0,i=(i=i+Math.imul(R,z)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,z)|0,r=r+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,X)|0)+Math.imul(C,Y)|0,o=o+Math.imul(C,X)|0,r=r+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(S,nt)|0,i=(i=i+Math.imul(S,rt)|0)+Math.imul(T,nt)|0,o=o+Math.imul(T,rt)|0,r=r+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,at)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,at)|0,r=r+Math.imul(v,ut)|0,i=(i=i+Math.imul(v,lt)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,lt)|0,r=r+Math.imul(m,ct)|0,i=(i=i+Math.imul(m,dt)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,dt)|0;var Et=(l+(r=r+Math.imul(c,mt)|0)|0)+((8191&(i=(i=i+Math.imul(c,gt)|0)+Math.imul(d,mt)|0))<<13)|0;l=((o=o+Math.imul(d,gt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(U,V),i=(i=Math.imul(U,H))+Math.imul(D,V)|0,o=Math.imul(D,H),r=r+Math.imul(q,J)|0,i=(i=i+Math.imul(q,z)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,z)|0,r=r+Math.imul(R,Y)|0,i=(i=i+Math.imul(R,X)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,X)|0,r=r+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(_,nt)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,r=r+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(b,ut)|0,o=o+Math.imul(b,lt)|0,r=r+Math.imul(v,ct)|0,i=(i=i+Math.imul(v,dt)|0)+Math.imul(y,ct)|0,o=o+Math.imul(y,dt)|0;var kt=(l+(r=r+Math.imul(m,mt)|0)|0)+((8191&(i=(i=i+Math.imul(m,gt)|0)+Math.imul(g,mt)|0))<<13)|0;l=((o=o+Math.imul(g,gt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,J),i=(i=Math.imul(U,z))+Math.imul(D,J)|0,o=Math.imul(D,z),r=r+Math.imul(q,Y)|0,i=(i=i+Math.imul(q,X)|0)+Math.imul(P,Y)|0,o=o+Math.imul(P,X)|0,r=r+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,tt)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,tt)|0,r=r+Math.imul(A,nt)|0,i=(i=i+Math.imul(A,rt)|0)+Math.imul(C,nt)|0,o=o+Math.imul(C,rt)|0,r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,at)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,at)|0,r=r+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,r=r+Math.imul(M,ct)|0,i=(i=i+Math.imul(M,dt)|0)+Math.imul(b,ct)|0,o=o+Math.imul(b,dt)|0;var _t=(l+(r=r+Math.imul(v,mt)|0)|0)+((8191&(i=(i=i+Math.imul(v,gt)|0)+Math.imul(y,mt)|0))<<13)|0;l=((o=o+Math.imul(y,gt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(U,Y),i=(i=Math.imul(U,X))+Math.imul(D,Y)|0,o=Math.imul(D,X),r=r+Math.imul(q,Q)|0,i=(i=i+Math.imul(q,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,r=r+Math.imul(R,nt)|0,i=(i=i+Math.imul(R,rt)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,rt)|0,r=r+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,at)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,r=r+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,lt)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,lt)|0,r=r+Math.imul(S,ct)|0,i=(i=i+Math.imul(S,dt)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,dt)|0;var Nt=(l+(r=r+Math.imul(M,mt)|0)|0)+((8191&(i=(i=i+Math.imul(M,gt)|0)+Math.imul(b,mt)|0))<<13)|0;l=((o=o+Math.imul(b,gt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(U,Q),i=(i=Math.imul(U,tt))+Math.imul(D,Q)|0,o=Math.imul(D,tt),r=r+Math.imul(q,nt)|0,i=(i=i+Math.imul(q,rt)|0)+Math.imul(P,nt)|0,o=o+Math.imul(P,rt)|0,r=r+Math.imul(R,ot)|0,i=(i=i+Math.imul(R,at)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,at)|0,r=r+Math.imul(A,ut)|0,i=(i=i+Math.imul(A,lt)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,lt)|0,r=r+Math.imul(k,ct)|0,i=(i=i+Math.imul(k,dt)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,dt)|0;var At=(l+(r=r+Math.imul(S,mt)|0)|0)+((8191&(i=(i=i+Math.imul(S,gt)|0)+Math.imul(T,mt)|0))<<13)|0;l=((o=o+Math.imul(T,gt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,nt),i=(i=Math.imul(U,rt))+Math.imul(D,nt)|0,o=Math.imul(D,rt),r=r+Math.imul(q,ot)|0,i=(i=i+Math.imul(q,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,r=r+Math.imul(R,ut)|0,i=(i=i+Math.imul(R,lt)|0)+Math.imul(I,ut)|0,o=o+Math.imul(I,lt)|0,r=r+Math.imul(A,ct)|0,i=(i=i+Math.imul(A,dt)|0)+Math.imul(C,ct)|0,o=o+Math.imul(C,dt)|0;var Ct=(l+(r=r+Math.imul(k,mt)|0)|0)+((8191&(i=(i=i+Math.imul(k,gt)|0)+Math.imul(_,mt)|0))<<13)|0;l=((o=o+Math.imul(_,gt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,ot),i=(i=Math.imul(U,at))+Math.imul(D,ot)|0,o=Math.imul(D,at),r=r+Math.imul(q,ut)|0,i=(i=i+Math.imul(q,lt)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,lt)|0,r=r+Math.imul(R,ct)|0,i=(i=i+Math.imul(R,dt)|0)+Math.imul(I,ct)|0,o=o+Math.imul(I,dt)|0;var Ot=(l+(r=r+Math.imul(A,mt)|0)|0)+((8191&(i=(i=i+Math.imul(A,gt)|0)+Math.imul(C,mt)|0))<<13)|0;l=((o=o+Math.imul(C,gt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(U,ut),i=(i=Math.imul(U,lt))+Math.imul(D,ut)|0,o=Math.imul(D,lt),r=r+Math.imul(q,ct)|0,i=(i=i+Math.imul(q,dt)|0)+Math.imul(P,ct)|0,o=o+Math.imul(P,dt)|0;var Rt=(l+(r=r+Math.imul(R,mt)|0)|0)+((8191&(i=(i=i+Math.imul(R,gt)|0)+Math.imul(I,mt)|0))<<13)|0;l=((o=o+Math.imul(I,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(U,ct),i=(i=Math.imul(U,dt))+Math.imul(D,ct)|0,o=Math.imul(D,dt);var It=(l+(r=r+Math.imul(q,mt)|0)|0)+((8191&(i=(i=i+Math.imul(q,gt)|0)+Math.imul(P,mt)|0))<<13)|0;l=((o=o+Math.imul(P,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863;var $t=(l+(r=Math.imul(U,mt))|0)+((8191&(i=(i=Math.imul(U,gt))+Math.imul(D,mt)|0))<<13)|0;return l=((o=Math.imul(D,gt))+(i>>>13)|0)+($t>>>26)|0,$t&=67108863,u[0]=pt,u[1]=vt,u[2]=yt,u[3]=wt,u[4]=Mt,u[5]=bt,u[6]=xt,u[7]=St,u[8]=Tt,u[9]=Et,u[10]=kt,u[11]=_t,u[12]=Nt,u[13]=At,u[14]=Ct,u[15]=Ot,u[16]=Rt,u[17]=It,u[18]=$t,0!==l&&(u[19]=l,n.length++),n};function f(t,e,n){return(new m).mulp(t,e,n)}function m(t,e){this.x=t,this.y=e}Math.imul||(d=c),i.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):n<63?c(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var h=o-l,c=(0|t.words[h])*(0|e.words[l]),d=67108863&c;s=67108863&(d=d+s|0),i+=(a=(a=a+(c/67108864|0)|0)+(d>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):f(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),n=i.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},m.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},m.prototype.permute=function(t,e,n,r,i,o){for(var a=0;a<o;a++)r[a]=e[t[a]],i[a]=n[t[a]]},m.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),h=0;h<i;h+=s)for(var c=u,d=l,f=0;f<a;f++){var m=n[h+f],g=r[h+f],p=n[h+f+a],v=r[h+f+a],y=c*p-d*v;v=c*v+d*p,p=y,n[h+f]=m+p,r[h+f]=g+v,n[h+f+a]=m-p,r[h+f+a]=g-v,f!==s&&(y=u*c-l*d,d=u*d+l*c,c=y)}},m.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},m.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},m.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},m.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},m.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),l=new Array(r),h=new Array(r),c=new Array(r),d=n.words;d.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,l,r),this.transform(a,o,s,u,r,i),this.transform(l,o,h,c,r,i);for(var f=0;f<r;f++){var m=s[f]*h[f]-u[f]*c[f];u[f]=s[f]*c[f]+u[f]*h[f],s[f]=m}return this.conjugate(s,u,r),this.transform(s,u,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),f(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new i(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var o=n.sqr();r<e.length;r++,o=o.sqr())0!==e[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var h=0;for(l=this.length-1;l>=0&&(0!==h||l>=i);l--){var c=0|this.words[l];this.words[l]=h<<26-o|c>>>o,h=c&s}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},i.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),o=t,a=0|o.words[o.length-1];0!==(n=26-this._countBits(a))&&(o=o.ushln(n),r.iushln(n),a=0|o.words[o.length-1]);var s,u=r.length-o.length;if("mod"!==e){(s=new i(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var h=r.clone()._ishlnsubmul(o,1,u);0===h.negative&&(r=h,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var d=67108864*(0|r.words[o.length+c])+(0|r.words[o.length+c-1]);for(d=Math.min(d/a|0,67108863),r._ishlnsubmul(o,d,c);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(o,1,c),r.isZero()||(r.negative^=1);s&&(s.words[c]=d)}return s&&s.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},i.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(o=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:o,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(o=s.div.neg()),{div:o,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modn(t.words[0]))}:this._wordDiv(t,e);var o,a,s},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},i.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new i(1),a=new i(0),s=new i(0),u=new i(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var h=r.clone(),c=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(h),a.isub(c)),o.iushrn(1),a.iushrn(1);for(var m=0,g=1;0==(r.words[0]&g)&&m<26;++m,g<<=1);if(m>0)for(r.iushrn(m);m-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(h),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(s),a.isub(u)):(r.isub(e),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},i.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o,a=new i(1),s=new i(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,h=1;0==(e.words[0]&h)&&l<26;++l,h<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,d=1;0==(r.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(o=0===e.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(t),o},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new b(t)},i.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function p(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function b(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){b.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}p.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},p.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},p.prototype.split=function(t,e){t.iushrn(this.n,0,e)},p.prototype.imulK=function(t){return t.imul(this.k)},r(v,p),v.prototype.split=function(t,e){for(var n=4194303,r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&n,i=10;i<t.length;i++){var a=0|t.words[i];t.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(y,p),r(w,p),r(M,p),M.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new y;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new M}return g[t]=e,e},b.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},b.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},b.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},b.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},b.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},b.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},b.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},b.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},b.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},b.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},b.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},b.prototype.isqr=function(t){return this.imul(t,t.clone())},b.prototype.sqr=function(t){return this.mul(t,t)},b.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new i(1)).iushrn(2);return this.pow(t,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);n(!o.isZero());var s=new i(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);0!==this.pow(h,l).cmp(u);)h.redIAdd(u);for(var c=this.pow(h,o),d=this.pow(t,o.addn(1).iushrn(1)),f=this.pow(t,o),m=a;0!==f.cmp(s);){for(var g=f,p=0;0!==g.cmp(s);p++)g=g.redSqr();n(p<m);var v=this.pow(c,new i(1).iushln(m-p-1));d=d.redMul(v),c=v.redSqr(),f=f.redMul(c),m=p}return d},b.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},b.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var o=n[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var l=e.words[r],h=u-1;h>=0;h--){var c=l>>h&1;o!==n[0]&&(o=this.sqr(o)),0!==c||0!==a?(a<<=1,a|=c,(4===++s||0===r&&0===h)&&(o=this.mul(o,n[a]),s=0,a=0)):s=0}u=26}return o},b.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},b.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new x(t)},r(x,b),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,e)}));let B=!1,j=!1;const W={debug:1,default:2,info:2,warning:3,error:4,off:5};let L=W.default,V=null;const H=function(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((e=>{try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(n){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();var G,J;!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(G||(G={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT"}(J||(J={}));class z{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const n=t.toLowerCase();null==W[n]&&this.throwArgumentError("invalid log level name","logLevel",t),L>W[n]||console.log.apply(console,e)}debug(...t){this._log(z.levels.DEBUG,t)}info(...t){this._log(z.levels.INFO,t)}warn(...t){this._log(z.levels.WARNING,t)}makeError(t,e,n){if(j)return this.makeError("censored error",e,{});e||(e=z.errors.UNKNOWN_ERROR),n||(n={});const r=[];Object.keys(n).forEach((t=>{try{r.push(t+"="+JSON.stringify(n[t]))}catch(e){r.push(t+"="+JSON.stringify(n[t].toString()))}})),r.push(`code=${e}`),r.push(`version=${this.version}`);const i=t;r.length&&(t+=" ("+r.join(", ")+")");const o=new Error(t);return o.reason=i,o.code=e,Object.keys(n).forEach((function(t){o[t]=n[t]})),o}throwError(t,e,n){throw this.makeError(t,e,n)}throwArgumentError(t,e,n){return this.throwError(t,z.errors.INVALID_ARGUMENT,{argument:e,value:n})}assert(t,e,n,r){t||this.throwError(e,n,r)}assertArgument(t,e,n,r){t||this.throwArgumentError(e,n,r)}checkNormalize(t){H&&this.throwError("platform missing String.prototype.normalize",z.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:H})}checkSafeUint53(t,e){"number"==typeof t&&(null==e&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,z.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,z.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,n){n=n?": "+n:"",t<e&&this.throwError("missing argument"+n,z.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+n,z.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){t!==Object&&null!=t||this.throwError("missing new",z.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",z.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",z.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return V||(V=new z("logger/5.0.9")),V}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",z.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),B){if(!t)return;this.globalLogger().throwError("error censorship permanent",z.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}j=!!t,B=!!e}static setLogLevel(t){const e=W[t.toLowerCase()];null!=e?L=e:z.globalLogger().warn("invalid log level - "+t)}static from(t){return new z(t)}}z.errors=J,z.levels=G;const Z=new z("bytes/5.0.10");function Y(t){return!!t.toHexString}function X(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return X(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function K(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"==typeof t)return!1;if(null==t.length)return!1;for(let e=0;e<t.length;e++){const n=t[e];if("number"!=typeof n||n<0||n>=256||n%1)return!1}return!0}function Q(t,e){if(e||(e={}),"number"==typeof t){Z.checkSafeUint53(t,"invalid arrayify value");const e=[];for(;t;)e.unshift(255&t),t=parseInt(String(t/256));return 0===e.length&&e.push(0),X(new Uint8Array(e))}if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),Y(t)&&(t=t.toHexString()),tt(t)){let n=t.substring(2);n.length%2&&("left"===e.hexPad?n="0x0"+n.substring(2):"right"===e.hexPad?n+="0":Z.throwArgumentError("hex data is odd-length","value",t));const r=[];for(let t=0;t<n.length;t+=2)r.push(parseInt(n.substring(t,t+2),16));return X(new Uint8Array(r))}return K(t)?X(new Uint8Array(t)):Z.throwArgumentError("invalid arrayify value","value",t)}function tt(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}function et(t,e){if(e||(e={}),"number"==typeof t){Z.checkSafeUint53(t,"invalid hexlify value");let e="";for(;t;)e="0123456789abcdef"[15&t]+e,t=Math.floor(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),Y(t))return t.toHexString();if(tt(t))return t.length%2&&("left"===e.hexPad?t="0x0"+t.substring(2):"right"===e.hexPad?t+="0":Z.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(K(t)){let e="0x";for(let n=0;n<t.length;n++){let r=t[n];e+="0123456789abcdef"[(240&r)>>4]+"0123456789abcdef"[15&r]}return e}return Z.throwArgumentError("invalid hexlify value","value",t)}function nt(t,e){for("string"!=typeof t?t=et(t):tt(t)||Z.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Z.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}var rt=D.BN;const it=new z("bignumber/5.0.14"),ot={};let at=!1;class st{constructor(t,e){it.checkNew(new.target,st),t!==ot&&it.throwError("cannot call constructor directly; use BigNumber.from",z.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return lt(ht(this).fromTwos(t))}toTwos(t){return lt(ht(this).toTwos(t))}abs(){return"-"===this._hex[0]?st.from(this._hex.substring(1)):this}add(t){return lt(ht(this).add(ht(t)))}sub(t){return lt(ht(this).sub(ht(t)))}div(t){return st.from(t).isZero()&&ct("division by zero","div"),lt(ht(this).div(ht(t)))}mul(t){return lt(ht(this).mul(ht(t)))}mod(t){const e=ht(t);return e.isNeg()&&ct("cannot modulo negative values","mod"),lt(ht(this).umod(e))}pow(t){const e=ht(t);return e.isNeg()&&ct("cannot raise to negative values","pow"),lt(ht(this).pow(e))}and(t){const e=ht(t);return(this.isNegative()||e.isNeg())&&ct("cannot 'and' negative values","and"),lt(ht(this).and(e))}or(t){const e=ht(t);return(this.isNegative()||e.isNeg())&&ct("cannot 'or' negative values","or"),lt(ht(this).or(e))}xor(t){const e=ht(t);return(this.isNegative()||e.isNeg())&&ct("cannot 'xor' negative values","xor"),lt(ht(this).xor(e))}mask(t){return(this.isNegative()||t<0)&&ct("cannot mask negative values","mask"),lt(ht(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&ct("cannot shift negative values","shl"),lt(ht(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&ct("cannot shift negative values","shr"),lt(ht(this).shrn(t))}eq(t){return ht(this).eq(ht(t))}lt(t){return ht(this).lt(ht(t))}lte(t){return ht(this).lte(ht(t))}gt(t){return ht(this).gt(ht(t))}gte(t){return ht(this).gte(ht(t))}isNegative(){return"-"===this._hex[0]}isZero(){return ht(this).isZero()}toNumber(){try{return ht(this).toNumber()}catch(t){ct("overflow","toNumber",this.toString())}return null}toString(){return arguments.length>0&&(10===arguments[0]?at||(at=!0,it.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?it.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",z.errors.UNEXPECTED_ARGUMENT,{}):it.throwError("BigNumber.toString does not accept parameters",z.errors.UNEXPECTED_ARGUMENT,{})),ht(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof st)return t;if("string"==typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new st(ot,ut(t)):t.match(/^-?[0-9]+$/)?new st(ot,ut(new rt(t))):it.throwArgumentError("invalid BigNumber string","value",t);if("number"==typeof t)return t%1&&ct("underflow","BigNumber.from",t),(t>=9007199254740991||t<=-9007199254740991)&&ct("overflow","BigNumber.from",t),st.from(String(t));const e=t;if("bigint"==typeof e)return st.from(e.toString());if(K(e))return st.from(et(e));if(e)if(e.toHexString){const t=e.toHexString();if("string"==typeof t)return st.from(t)}else{let t=e._hex;if(null==t&&"BigNumber"===e.type&&(t=e.hex),"string"==typeof t&&(tt(t)||"-"===t[0]&&tt(t.substring(1))))return st.from(t)}return it.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!(!t||!t._isBigNumber)}}function ut(t){if("string"!=typeof t)return ut(t.toString(16));if("-"===t[0])return"-"===(t=t.substring(1))[0]&&it.throwArgumentError("invalid hex","value",t),"0x00"===(t=ut(t))?t:"-"+t;if("0x"!==t.substring(0,2)&&(t="0x"+t),"0x"===t)return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&"0x00"===t.substring(0,4);)t="0x"+t.substring(4);return t}function lt(t){return st.from(ut(t))}function ht(t){const e=st.from(t).toHexString();return"-"===e[0]?new rt("-"+e.substring(3),16):new rt(e.substring(2),16)}function ct(t,e,n){const r={fault:t,operation:e};return null!=n&&(r.value=n),it.throwError(t,z.errors.NUMERIC_FAULT,r)}const dt=new z("bignumber/5.0.14"),ft={},mt=st.from(0),gt=st.from(-1);function pt(t,e,n,r){const i={fault:e,operation:n};return void 0!==r&&(i.value=r),dt.throwError(t,z.errors.NUMERIC_FAULT,i)}let vt="0";for(;vt.length<256;)vt+=vt;function yt(t){if("number"!=typeof t)try{t=st.from(t).toNumber()}catch(t){}return"number"==typeof t&&t>=0&&t<=256&&!(t%1)?"1"+vt.substring(0,t):dt.throwArgumentError("invalid decimal size","decimals",t)}function wt(t,e){null==e&&(e=0);const n=yt(e),r=(t=st.from(t)).lt(mt);r&&(t=t.mul(gt));let i=t.mod(n).toString();for(;i.length<n.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=t.div(n).toString();return t=o+"."+i,r&&(t="-"+t),t}function Mt(t,e){null==e&&(e=0);const n=yt(e);if("string"==typeof t&&t.match(/^-?[0-9.,]+$/)||dt.throwArgumentError("invalid decimal value","value",t),n.length-1==0)return st.from(t);const r="-"===t.substring(0,1);r&&(t=t.substring(1)),"."===t&&dt.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&dt.throwArgumentError("too many decimal points","value",t);let o=i[0],a=i[1];for(o||(o="0"),a||(a="0"),a.length>n.length-1&&pt("fractional component exceeds decimals","underflow","parseFixed");a.length<n.length-1;)a+="0";const s=st.from(o),u=st.from(a);let l=s.mul(n).add(u);return r&&(l=l.mul(gt)),l}class bt{constructor(t,e,n,r){t!==ft&&dt.throwError("cannot use FixedFormat constructor; use FixedFormat.from",z.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=e,this.width=n,this.decimals=r,this.name=(e?"":"u")+"fixed"+String(n)+"x"+String(r),this._multiplier=yt(r),Object.freeze(this)}static from(t){if(t instanceof bt)return t;let e=!0,n=128,r=18;if("string"==typeof t){if("fixed"===t);else if("ufixed"===t)e=!1;else if(null!=t){const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||dt.throwArgumentError("invalid fixed format","format",t),e="u"!==i[1],n=parseInt(i[2]),r=parseInt(i[3])}}else if(t){const i=(e,n,r)=>null==t[e]?r:(typeof t[e]!==n&&dt.throwArgumentError("invalid fixed format ("+e+" not "+n+")","format."+e,t[e]),t[e]);e=i("signed","boolean",e),n=i("width","number",n),r=i("decimals","number",r)}return n%8&&dt.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),r>80&&dt.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",r),new bt(ft,e,n,r)}}class xt{constructor(t,e,n,r){dt.checkNew(new.target,xt),t!==ft&&dt.throwError("cannot use FixedNumber constructor; use FixedNumber.from",z.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=r,this._hex=e,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&dt.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const e=Mt(this._value,this.format.decimals),n=Mt(t._value,t.format.decimals);return xt.fromValue(e.add(n),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const e=Mt(this._value,this.format.decimals),n=Mt(t._value,t.format.decimals);return xt.fromValue(e.sub(n),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const e=Mt(this._value,this.format.decimals),n=Mt(t._value,t.format.decimals);return xt.fromValue(e.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const e=Mt(this._value,this.format.decimals),n=Mt(t._value,t.format.decimals);return xt.fromValue(e.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){let t=this.toString().split("."),e=xt.from(t[0],this.format);const n=!t[1].match(/^(0*)$/);return this.isNegative()&&n&&(e=e.subUnsafe(St)),e}ceiling(){let t=this.toString().split("."),e=xt.from(t[0],this.format);const n=!t[1].match(/^(0*)$/);return!this.isNegative()&&n&&(e=e.addUnsafe(St)),e}round(t){null==t&&(t=0);let e=this.toString().split(".");if((t<0||t>80||t%1)&&dt.throwArgumentError("invalid decimal count","decimals",t),e[1].length<=t)return this;const n=xt.from("1"+vt.substring(0,t));return this.mulUnsafe(n).addUnsafe(Tt).floor().divUnsafe(n)}isZero(){return"0.0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(t){if(null==t)return this._hex;t%8&&dt.throwArgumentError("invalid byte width","width",t);return nt(st.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString(),t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return xt.fromString(this._value,t)}static fromValue(t,e,n){return null!=n||null==e||function(t){return null!=t&&(st.isBigNumber(t)||"number"==typeof t&&t%1==0||"string"==typeof t&&!!t.match(/^-?[0-9]+$/)||tt(t)||"bigint"==typeof t||K(t))}(e)||(n=e,e=null),null==e&&(e=0),null==n&&(n="fixed"),xt.fromString(wt(t,e),bt.from(n))}static fromString(t,e){null==e&&(e="fixed");const n=bt.from(e),r=Mt(t,n.decimals);!n.signed&&r.lt(mt)&&pt("unsigned value cannot be negative","overflow","value",t);let i=null;n.signed?i=r.toTwos(n.width).toHexString():(i=r.toHexString(),i=nt(i,n.width/8));const o=wt(r,n.decimals);return new xt(ft,i,o,n)}static fromBytes(t,e){null==e&&(e="fixed");const n=bt.from(e);if(Q(t).length>n.width/8)throw new Error("overflow");let r=st.from(t);n.signed&&(r=r.fromTwos(n.width));const i=r.toTwos((n.signed?0:1)+n.width).toHexString(),o=wt(r,n.decimals);return new xt(ft,i,o,n)}static from(t,e){if("string"==typeof t)return xt.fromString(t,e);if(K(t))return xt.fromBytes(t,e);try{return xt.fromValue(t,0,e)}catch(t){if(t.code!==z.errors.INVALID_ARGUMENT)throw t}return dt.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!(!t||!t._isFixedNumber)}}const St=xt.from(1),Tt=xt.from("0.5");var Et=t((function(t){
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.5.7
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2016
 * @license MIT
 */
!function(){var n="object"==typeof window?window:{};!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&(n=e);for(var r=!n.JS_SHA3_NO_COMMON_JS&&t.exports,i="0123456789abcdef".split(""),o=[0,8,16,24],a=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],s=[224,256,384,512],u=["hex","buffer","arrayBuffer","array"],l=function(t,e,n){return function(r){return new M(t,e,t).update(r)[n]()}},h=function(t,e,n){return function(r,i){return new M(t,e,i).update(r)[n]()}},c=function(t,e){var n=l(t,e,"hex");n.create=function(){return new M(t,e,t)},n.update=function(t){return n.create().update(t)};for(var r=0;r<u.length;++r){var i=u[r];n[i]=l(t,e,i)}return n},d=[{name:"keccak",padding:[1,256,65536,16777216],bits:s,createMethod:c},{name:"sha3",padding:[6,1536,393216,100663296],bits:s,createMethod:c},{name:"shake",padding:[31,7936,2031616,520093696],bits:[128,256],createMethod:function(t,e){var n=h(t,e,"hex");n.create=function(n){return new M(t,e,n)},n.update=function(t,e){return n.create(e).update(t)};for(var r=0;r<u.length;++r){var i=u[r];n[i]=h(t,e,i)}return n}}],f={},m=[],g=0;g<d.length;++g)for(var p=d[g],v=p.bits,y=0;y<v.length;++y){var w=p.name+"_"+v[y];m.push(w),f[w]=p.createMethod(v[y],p.padding)}function M(t,e,n){this.blocks=[],this.s=[],this.padding=e,this.outputBits=n,this.reset=!0,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var r=0;r<50;++r)this.s[r]=0}M.prototype.update=function(t){var e="string"!=typeof t;e&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t));for(var n,r,i=t.length,a=this.blocks,s=this.byteCount,u=this.blockCount,l=0,h=this.s;l<i;){if(this.reset)for(this.reset=!1,a[0]=this.block,n=1;n<u+1;++n)a[n]=0;if(e)for(n=this.start;l<i&&n<s;++l)a[n>>2]|=t[l]<<o[3&n++];else for(n=this.start;l<i&&n<s;++l)(r=t.charCodeAt(l))<128?a[n>>2]|=r<<o[3&n++]:r<2048?(a[n>>2]|=(192|r>>6)<<o[3&n++],a[n>>2]|=(128|63&r)<<o[3&n++]):r<55296||r>=57344?(a[n>>2]|=(224|r>>12)<<o[3&n++],a[n>>2]|=(128|r>>6&63)<<o[3&n++],a[n>>2]|=(128|63&r)<<o[3&n++]):(r=65536+((1023&r)<<10|1023&t.charCodeAt(++l)),a[n>>2]|=(240|r>>18)<<o[3&n++],a[n>>2]|=(128|r>>12&63)<<o[3&n++],a[n>>2]|=(128|r>>6&63)<<o[3&n++],a[n>>2]|=(128|63&r)<<o[3&n++]);if(this.lastByteIndex=n,n>=s){for(this.start=n-s,this.block=a[u],n=0;n<u;++n)h[n]^=a[n];b(h),this.reset=!0}else this.start=n}return this},M.prototype.finalize=function(){var t=this.blocks,e=this.lastByteIndex,n=this.blockCount,r=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[n],e=1;e<n+1;++e)t[e]=0;for(t[n-1]|=2147483648,e=0;e<n;++e)r[e]^=t[e];b(r)},M.prototype.toString=M.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,n=this.s,r=this.outputBlocks,o=this.extraBytes,a=0,s=0,u="";s<r;){for(a=0;a<e&&s<r;++a,++s)t=n[a],u+=i[t>>4&15]+i[15&t]+i[t>>12&15]+i[t>>8&15]+i[t>>20&15]+i[t>>16&15]+i[t>>28&15]+i[t>>24&15];s%e==0&&(b(n),a=0)}return o&&(t=n[a],o>0&&(u+=i[t>>4&15]+i[15&t]),o>1&&(u+=i[t>>12&15]+i[t>>8&15]),o>2&&(u+=i[t>>20&15]+i[t>>16&15])),u},M.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,o=0,a=0,s=this.outputBits>>3;t=i?new ArrayBuffer(r+1<<2):new ArrayBuffer(s);for(var u=new Uint32Array(t);a<r;){for(o=0;o<e&&a<r;++o,++a)u[a]=n[o];a%e==0&&b(n)}return i&&(u[o]=n[o],t=t.slice(0,s)),t},M.prototype.buffer=M.prototype.arrayBuffer,M.prototype.digest=M.prototype.array=function(){this.finalize();for(var t,e,n=this.blockCount,r=this.s,i=this.outputBlocks,o=this.extraBytes,a=0,s=0,u=[];s<i;){for(a=0;a<n&&s<i;++a,++s)t=s<<2,e=r[a],u[t]=255&e,u[t+1]=e>>8&255,u[t+2]=e>>16&255,u[t+3]=e>>24&255;s%n==0&&b(r)}return o&&(t=s<<2,e=r[a],o>0&&(u[t]=255&e),o>1&&(u[t+1]=e>>8&255),o>2&&(u[t+2]=e>>16&255)),u};var b=function(t){var e,n,r,i,o,s,u,l,h,c,d,f,m,g,p,v,y,w,M,b,x,S,T,E,k,_,N,A,C,O,R,I,$,q,P,F,U,D,B,j,W,L,V,H,G,J,z,Z,Y,X,K,Q,tt,et,nt,rt,it,ot,at,st,ut,lt,ht;for(r=0;r<48;r+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],s=t[2]^t[12]^t[22]^t[32]^t[42],u=t[3]^t[13]^t[23]^t[33]^t[43],l=t[4]^t[14]^t[24]^t[34]^t[44],h=t[5]^t[15]^t[25]^t[35]^t[45],c=t[6]^t[16]^t[26]^t[36]^t[46],d=t[7]^t[17]^t[27]^t[37]^t[47],e=(f=t[8]^t[18]^t[28]^t[38]^t[48])^(s<<1|u>>>31),n=(m=t[9]^t[19]^t[29]^t[39]^t[49])^(u<<1|s>>>31),t[0]^=e,t[1]^=n,t[10]^=e,t[11]^=n,t[20]^=e,t[21]^=n,t[30]^=e,t[31]^=n,t[40]^=e,t[41]^=n,e=i^(l<<1|h>>>31),n=o^(h<<1|l>>>31),t[2]^=e,t[3]^=n,t[12]^=e,t[13]^=n,t[22]^=e,t[23]^=n,t[32]^=e,t[33]^=n,t[42]^=e,t[43]^=n,e=s^(c<<1|d>>>31),n=u^(d<<1|c>>>31),t[4]^=e,t[5]^=n,t[14]^=e,t[15]^=n,t[24]^=e,t[25]^=n,t[34]^=e,t[35]^=n,t[44]^=e,t[45]^=n,e=l^(f<<1|m>>>31),n=h^(m<<1|f>>>31),t[6]^=e,t[7]^=n,t[16]^=e,t[17]^=n,t[26]^=e,t[27]^=n,t[36]^=e,t[37]^=n,t[46]^=e,t[47]^=n,e=c^(i<<1|o>>>31),n=d^(o<<1|i>>>31),t[8]^=e,t[9]^=n,t[18]^=e,t[19]^=n,t[28]^=e,t[29]^=n,t[38]^=e,t[39]^=n,t[48]^=e,t[49]^=n,g=t[0],p=t[1],J=t[11]<<4|t[10]>>>28,z=t[10]<<4|t[11]>>>28,A=t[20]<<3|t[21]>>>29,C=t[21]<<3|t[20]>>>29,st=t[31]<<9|t[30]>>>23,ut=t[30]<<9|t[31]>>>23,L=t[40]<<18|t[41]>>>14,V=t[41]<<18|t[40]>>>14,q=t[2]<<1|t[3]>>>31,P=t[3]<<1|t[2]>>>31,v=t[13]<<12|t[12]>>>20,y=t[12]<<12|t[13]>>>20,Z=t[22]<<10|t[23]>>>22,Y=t[23]<<10|t[22]>>>22,O=t[33]<<13|t[32]>>>19,R=t[32]<<13|t[33]>>>19,lt=t[42]<<2|t[43]>>>30,ht=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,nt=t[4]<<30|t[5]>>>2,F=t[14]<<6|t[15]>>>26,U=t[15]<<6|t[14]>>>26,w=t[25]<<11|t[24]>>>21,M=t[24]<<11|t[25]>>>21,X=t[34]<<15|t[35]>>>17,K=t[35]<<15|t[34]>>>17,I=t[45]<<29|t[44]>>>3,$=t[44]<<29|t[45]>>>3,E=t[6]<<28|t[7]>>>4,k=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,D=t[26]<<25|t[27]>>>7,B=t[27]<<25|t[26]>>>7,b=t[36]<<21|t[37]>>>11,x=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,H=t[8]<<27|t[9]>>>5,G=t[9]<<27|t[8]>>>5,_=t[18]<<20|t[19]>>>12,N=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,at=t[28]<<7|t[29]>>>25,j=t[38]<<8|t[39]>>>24,W=t[39]<<8|t[38]>>>24,S=t[48]<<14|t[49]>>>18,T=t[49]<<14|t[48]>>>18,t[0]=g^~v&w,t[1]=p^~y&M,t[10]=E^~_&A,t[11]=k^~N&C,t[20]=q^~F&D,t[21]=P^~U&B,t[30]=H^~J&Z,t[31]=G^~z&Y,t[40]=et^~rt&ot,t[41]=nt^~it&at,t[2]=v^~w&b,t[3]=y^~M&x,t[12]=_^~A&O,t[13]=N^~C&R,t[22]=F^~D&j,t[23]=U^~B&W,t[32]=J^~Z&X,t[33]=z^~Y&K,t[42]=rt^~ot&st,t[43]=it^~at&ut,t[4]=w^~b&S,t[5]=M^~x&T,t[14]=A^~O&I,t[15]=C^~R&$,t[24]=D^~j&L,t[25]=B^~W&V,t[34]=Z^~X&Q,t[35]=Y^~K&tt,t[44]=ot^~st&lt,t[45]=at^~ut&ht,t[6]=b^~S&g,t[7]=x^~T&p,t[16]=O^~I&E,t[17]=R^~$&k,t[26]=j^~L&q,t[27]=W^~V&P,t[36]=X^~Q&H,t[37]=K^~tt&G,t[46]=st^~lt&et,t[47]=ut^~ht&nt,t[8]=S^~g&v,t[9]=T^~p&y,t[18]=I^~E&_,t[19]=$^~k&N,t[28]=L^~q&F,t[29]=V^~P&U,t[38]=Q^~H&J,t[39]=tt^~G&z,t[48]=lt^~et&rt,t[49]=ht^~nt&it,t[0]^=a[r],t[1]^=a[r+1]};if(r)t.exports=f;else for(g=0;g<m.length;++g)n[m[g]]=f[m[g]]}()}));const kt=new z("address/5.0.10");function _t(t){tt(t,20)||kt.throwArgumentError("invalid address","address",t);const e=(t=t.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let t=0;t<40;t++)n[t]=e[t].charCodeAt(0);const r=Q((i=n,"0x"+Et.keccak_256(Q(i))));var i;for(let t=0;t<40;t+=2)r[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&r[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const Nt={};for(let t=0;t<10;t++)Nt[String(t)]=String(t);for(let t=0;t<26;t++)Nt[String.fromCharCode(65+t)]=String(10+t);const At=Math.floor(function(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}(9007199254740991));function Ct(t){let e=null;if("string"!=typeof t&&kt.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),e=_t(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&kt.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==function(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>Nt[t])).join("");for(;e.length>=At;){let t=e.substring(0,At);e=parseInt(t,10)%97+e.substring(t.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}(t)&&kt.throwArgumentError("bad icap checksum","address",t),n=t.substring(4),e=new rt(n,36).toString(16);e.length<40;)e="0"+e;e=_t("0x"+e)}else kt.throwArgumentError("invalid address","address",t);var n;return e}const Ot=new z("units/5.0.10"),Rt=["wei","kwei","mwei","gwei","szabo","finney","ether"];function It(t){return function(t,e){if("string"!=typeof t&&Ot.throwArgumentError("value must be a string","value",t),"string"==typeof e){const t=Rt.indexOf(e);-1!==t&&(e=3*t)}return Mt(t,null!=e?e:18)}(t,18)}function $t(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function qt({query:t,variables:e}){return $t(this,void 0,void 0,(function*(){const n=JSON.stringify({query:t,variables:e});return yield function(t){return $t(this,void 0,void 0,(function*(){const e={method:"POST",headers:{"content-type":"application/json"},body:t},n=yield a("https://arweave.net/graphql",e);return yield n.clone().json()}))}(n)}))}var Pt='query($owners: [String!], $recipients: [String!], $num: Int) {\n  transactions(\n    owners: $owners\n    recipients: $recipients\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Genesis" }\n    ]\n    first: $num\n  ) {\n    edges {\n      node {\n        id\n        owner {\n          address\n        }\n      }\n    }\n  }\n}\n';const Ft=2147483647,Ut=t=>{let e=0;const n=Math.random();for(const r of Object.keys(t))if(e+=t[r],n<=e&&t[r]>0)return r},Dt=(t,e,n=!1)=>$t(void 0,void 0,void 0,(function*(){let r;const i=(yield qt({query:'\n        query($addr: [String!]!, $chain: [String!]!) {\n          transactions(\n            tags: [\n              { name: "Application", values: "ArLink" }\n              { name: "Chain", values: $chain }\n              { name: "Wallet", values: $addr }\n            ]\n            first: 1\n          ) {\n            edges {\n              node {\n                owner {\n                  address\n                }\n              }\n            }\n          }\n        }\n      ',variables:{addr:t,chain:e}})).data.transactions.edges;return 1===i.length&&(r=i[0].node.owner.address),n?r:r||(yield Dt(Ct(t),e,!0))})),Bt=(t,e)=>$t(void 0,void 0,void 0,(function*(){let n;const r=(yield qt({query:'\n        query($addr: String!, $chain: [String!]!) {\n          transactions(\n            owners: [$addr]\n            tags: [\n              { name: "Application", values: "ArLink" }\n              { name: "Chain", values: $chain }\n            ]\n            first: 1\n          ) {\n            edges {\n              node {\n                tags {\n                  name\n                  value\n                }\n              }\n            }\n          }\n        }\n      ',variables:{addr:t,chain:e}})).data.transactions.edges;if(1===r.length){const t=r[0].node.tags.find((t=>"Wallet"===t.name));t&&(n=t.value)}return n}));function jt(t){return void 0!==t.validity}const Wt=(t,e,n)=>$t(void 0,void 0,void 0,(function*(){const r=yield P(t,n);if(jt(r))return 0;const i=r.vault;let o=0;if(e in i){const n=(yield t.network.getInfo()).height;o+=i[e].filter((t=>n<t.end)).map((t=>t.balance)).reduce(((t,e)=>t+e),0)}return o})),Lt=(t,e,n)=>$t(void 0,void 0,void 0,(function*(){const r=1*(yield Wt(t,e,n))/2,i=1*(yield((t,e,n)=>$t(void 0,void 0,void 0,(function*(){const r=yield P(t,n);if(jt(r))return 0;const i=r.vault;if(e in i){const n=(yield t.network.getInfo()).height;for(const t of i[e])if(n<t.end)return t.end-t.start}return 0})))(t,e,n))/3,o=1*(yield((t,e)=>$t(void 0,void 0,void 0,(function*(){return parseFloat(t.ar.winstonToAr(yield t.wallets.getBalance(e)))})))(t,e))/6;return parseFloat((r+i+o).toFixed(3))})),Vt=(t,e,n)=>$t(void 0,void 0,void 0,(function*(){const r=(yield qt({query:Pt,variables:{recipients:[n],num:Ft}})).data.transactions.edges,i=[],o=[];for(const n of r)o.find((t=>t===n.node.owner.address))||((yield Wt(t,n.node.owner.address,e))>0&&i.push(n.node.owner.address),o.push(n.node.owner.address));return i})),Ht=t=>{const e=t.findIndex((t=>isNaN(t)));if(-1===e)return t;let n=e;for(;n<t.length&&isNaN(t[n]);)n++;for(let r=e;r<n;r++)t[r]=0===e?t[n]:t[e-1];return Ht(t)},Gt=(t,e,n,r)=>$t(void 0,void 0,void 0,(function*(){const i=yield Vt(t,n,r),a=(yield qt({query:'\n        query($posts: [String!], $num: Int) {\n          transactions(\n            owners: $posts\n            tags: [\n              { name: "Exchange", values: "Verto" }\n              { name: "Type", values: "Confirmation" }\n            ]\n            first: $num\n          ) {\n            edges {\n              node {\n                id\n                block {\n                  timestamp\n                }\n                tags {\n                  name\n                  value\n                }\n              }\n            }\n          }\n        }      \n      ',variables:{posts:i,num:Ft}})).data.transactions.edges,s=[];for(const t of a){const n=t.node,r=n.tags.find((t=>"Received"===t.name));if(r&&r.value.split(" ")[1]===e){const t=n.tags.find((t=>"Swap"===t.name));if(t){const e=(yield qt({query:"\n                query($txID: ID!) {\n                  transaction(id: $txID) {\n                    tags {\n                      name\n                      value\n                    }\n                  }\n                }          \n              ",variables:{txID:t.value}})).data.transaction.tags.find((t=>"Rate"===t.name));e&&s.push({id:n.id,rate:parseFloat(e.value),timestamp:n.block?n.block.timestamp:parseInt((new Date).getTime().toString().slice(0,-3))})}}}let u=[];const l=[];if(s.length>0){let t=o().add(1,"days").hours(0).minutes(0).seconds(0);const e=s[s.length-1].timestamp;for(;t.unix()>=e;){const e=[],n=t.clone().subtract(1,"days");for(const r of s)r.timestamp<=t.unix()&&r.timestamp>=n.unix()&&e.push(r.rate);u.push(e.reduce(((t,e)=>t+e),0)/e.length),l.push(n.format("MM.DD")),t=n}u.every((t=>isNaN(t)))||(u=Ht(u.reverse()))}return{rates:u,dates:l.reverse()}}));var Jt='query($token: [String!]!, $num: Int) {\n  transactions(\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Sell" }\n      { name: "Contract", values: $token }\n    ]\n    first: $num\n  ) {\n    edges {\n      node {\n        block {\n          timestamp\n        }\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n';const zt=t=>$t(void 0,void 0,void 0,(function*(){const e=(yield qt({query:Jt,variables:{token:t,num:Ft}})).data.transactions.edges,n=[];e.map((({node:t})=>{const e=t.tags.find((t=>"Input"===t.name));e&&n.push({amnt:JSON.parse(e.value).qty,timestamp:t.block.timestamp})}));const r=[],i=[];if(n.length>0){let t=o().add(1,"days").hours(0).minutes(0).seconds(0);for(;t.unix()>=n[n.length-1].timestamp;){const e=t.clone().subtract(1,"days"),o=n.filter((n=>n.timestamp<=t.unix()&&n.timestamp>=e.unix())).map((t=>t.amnt)).reduce(((t,e)=>t+e),0);r.push(o),i.push(e.format("MMM DD")),t=e}}return{volume:r.reverse(),dates:i.reverse()}})),Zt=(t,e)=>$t(void 0,void 0,void 0,(function*(){const n=[e];"undefined"!=typeof window&&JSON.parse(localStorage.getItem("tokens")||"[]").map((t=>n.push(t)));const r=[];for(const e of n)try{const n=yield P(t,e),i=jt(n)?n.state:n,o=yield zt(e);r.push({id:e,name:i.name,ticker:i.ticker,volume:o.volume.reduce(((t,e)=>t+e),0)})}catch(t){}r.sort(((t,e)=>e.volume-t.volume));const i=[];return r.map((t=>i.push({id:t.id,name:t.name,ticker:t.ticker}))),i})),Yt=(t,e)=>$t(void 0,void 0,void 0,(function*(){const n=(yield qt({query:'query($exchange: String!) {\n  transactions(\n    recipients: [$exchange]\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Token" }\n    ]\n    first: 2147483647\n  ) {\n    edges {\n      node {\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n',variables:{exchange:e}})).data.transactions.edges,r=[];n.map((({node:t})=>{const e=t.tags.find((t=>"Contract"===t.name));if(e){const t=e.value;r.find((e=>e.id===t))||""===t||r.push({id:t,name:"",ticker:"",amnt:0,valid:!0})}}));for(let n=0;n<r.length;n++)try{const i=yield F(t,r[n].id),o=JSON.parse(i);r[n].name=o.name,r[n].ticker=o.ticker;let a=(yield qt({query:'\n            query($exchange: String!, $contract: [String!]!) {\n              transactions(\n                recipients: [$exchange]\n                tags: [\n                  { name: "Exchange", values: "Verto" }\n                  { name: "Type", values: "Token" }\n                  { name: "Contract", values: $contract }\n                ]\n                first: 2147483647\n              ) {\n                edges {\n                  node {\n                    owner {\n                      address\n                    }\n                  }\n                }\n              }\n            }\n          ',variables:{exchange:e,contract:r[n].id}})).data.transactions.edges;const s={};a=a.filter((({node:t})=>!(t.owner.address in s)&&(s[t.owner.address]=!0))),r[n].amnt=a.length}catch(t){r[n].valid=!1}r.sort(((t,e)=>e.amnt-t.amnt));const i=[];return r.map((t=>{t.valid&&i.push({id:t.id,name:t.name,ticker:t.ticker})})),i.splice(0,10)}));var Xt='query($txID: [String!]!) {\n  transactions(\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Confirmation" }\n      { name: "Swap", values: $txID }\n    ]\n    first: 1\n  ) {\n    edges {\n      node {\n        block {\n          timestamp\n        }\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n',Kt='query($txID: [String!]!) {\n  transactions(\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Confirmation" }\n      { name: "Match", values: $txID }\n    ]\n    first: 1\n  ) {\n    edges {\n      node {\n        block {\n          timestamp\n        }\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n';const Qt=(t,e,n)=>$t(void 0,void 0,void 0,(function*(){var r;const i=null===(r=(yield qt({query:Pt,variables:{owners:[e],recipients:[n],num:1}})).data.transactions.edges[0])||void 0===r?void 0:r.node.id;return i?JSON.parse((yield t.transactions.getData(i,{decode:!0,string:!0})).toString()):"invalid"})),te=(t,e,n,r)=>$t(void 0,void 0,void 0,(function*(){var i,a,s,u,c,d,f,m,g,p;const v=(t=>{const e={};return t.filter((t=>!(t.id in e)&&(e[t.id]=!0)))})([...yield Yt(t,r),...yield Zt(t,n)]);let y;const w=null===(i=e.node.tags.find((t=>"Type"===t.name)))||void 0===i?void 0:i.value,M=parseFloat(e.node.quantity.ar);if(w){if("Buy"===w){const t=null===(a=e.node.tags.find((t=>"Token"===t.name)))||void 0===a?void 0:a.value,n=v.find((e=>e.id===t));n&&(y={id:e.node.id,timestamp:e.node.block?o.unix(e.node.block.timestamp).format("YYYY-MM-DD HH:mm:ss"):"not mined yet",type:w,sent:M+" AR",received:"??? "+n.ticker,status:"pending",duration:"not completed"})}if("Sell"===w){const t=null===(s=e.node.tags.find((t=>"Contract"===t.name)))||void 0===s?void 0:s.value,n=v.find((e=>e.id===t));if(n){const t=null===(u=e.node.tags.find((t=>"Input"===t.name)))||void 0===u?void 0:u.value;t&&(y={id:e.node.id,timestamp:e.node.block?o.unix(e.node.block.timestamp).format("YYYY-MM-DD HH:mm:ss"):"not mined yet",type:w,sent:`${JSON.parse(t).qty} ${n.ticker}`,received:"??? AR",status:"pending",duration:"not completed"})}}if("Swap"===w){const t=null===(c=e.node.tags.find((t=>"Chain"===t.name)))||void 0===c?void 0:c.value;if(null===(d=e.node.tags.find((t=>"Hash"===t.name)))||void 0===d?void 0:d.value){const n=null===(f=e.node.tags.find((t=>"Value"===t.name)))||void 0===f?void 0:f.value;if(n){const r=null===(m=e.node.tags.find((t=>"Token"===t.name)))||void 0===m?void 0:m.value,i=v.find((t=>t.id===r));y={id:e.node.id,timestamp:e.node.block?o.unix(e.node.block.timestamp).format("YYYY-MM-DD HH:mm:ss"):"not mined yet",type:w,sent:`${n} ${t}`,received:"??? "+(i?i.ticker:"AR"),status:"pending",duration:"not completed"}}}else y={id:e.node.id,timestamp:e.node.block?o.unix(e.node.block.timestamp).format("YYYY-MM-DD HH:mm:ss"):"not mined yet",type:w,sent:M+" AR",received:"??? "+t,status:"pending",duration:"not completed"}}}if(y){let t;if(t="Swap"===y.type?"AR"===y.sent.split(" ")[1]?(yield l(Xt,{txID:y.id})).data.transactions.edges[0]:(yield l("AR"===y.received.split(" ")[1]?Xt:Kt,{txID:null===(g=(yield h(y.id)).tags.find((t=>"Hash"===t.name)))||void 0===g?void 0:g.value})).data.transactions.edges[0]:(yield l(Kt,{txID:y.id})).data.transactions.edges[0],t){const e=null===(p=t.node.tags.find((t=>"Received"===t.name)))||void 0===p?void 0:p.value;if(e)if(y.status="success",y.received=e,t.node.block){const e=o(y.timestamp),n=o(o.unix(t.node.block.timestamp).format("YYYY-MM-DD HH:mm:ss")),r=o.duration(n.diff(e));y.duration=r.humanize()}else y.duration="not mined yet"}(yield l('query($txID: [String!]!) {\n  transactions(\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Cancel" }\n      { name: "Order", values: $txID }\n    ]\n    first: 1\n  ) {\n    edges {\n      node {\n        id\n      }\n    }\n  }\n}\n',{txID:y.id})).data.transactions.edges[0]&&(y.status="failed",y.duration="cancelled"),(yield l('query($return: [String!]!, $order: [String!]!) {\n  transactions(\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: $return }\n      { name: "Order", values: $order }\n    ]\n    first: 1\n  ) {\n    edges {\n      node {\n        block {\n          timestamp\n        }\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n',{return:y.type+"-Return",order:y.id})).data.transactions.edges[0]&&(y.status="failed",y.duration="returned")}return y})),ee=(t,e)=>$t(void 0,void 0,void 0,(function*(){const n=t.tags.find((t=>"Contract"===t.name)),r=t.tags.find((t=>"Input"===t.name));if(n&&r){const t=JSON.parse(r.value).qty,i=yield e.transactions.getData(n.value,{decode:!0,string:!0});return`${t} ${JSON.parse(i.toString()).ticker}`}return""})),ne=t=>{const e=t.findIndex((t=>isNaN(t)));if(-1===e)return t;let n=e;for(;n<t.length&&isNaN(t[n]);)n++;for(let r=e;r<n;r++)t[r]=0===e?t[n]:t[e-1];return ne(t)},re=t=>$t(void 0,void 0,void 0,(function*(){const e=(yield qt({query:'\n        query($num: Int) {\n          transactions(\n            tags: [\n              { name: "Exchange", values: "Verto" }\n              { name: "Type", values: "Confirmation" }\n            ]\n            first: $num\n          ) {\n            edges {\n              node {\n                id\n                block {\n                  timestamp\n                }\n                tags {\n                  name\n                  value\n                }\n              }\n            }\n          }\n        }      \n      ',variables:{num:Ft}})).data.transactions.edges,n=[];for(const r of e){const e=r.node,i=e.tags.find((t=>"Received"===t.name));if(i&&"AR"===i.value.split(" ")[1]){const r=e.tags.find((t=>"Match"===t.name));if(r){const i=(yield qt({query:"\n                query($txID: ID!) {\n                  transaction(id: $txID) {\n                    tags {\n                      name\n                      value\n                    }\n                  }\n                }          \n              ",variables:{txID:r.value}})).data.transaction,o=i.tags.find((t=>"Contract"===t.name));if(o&&o.value===t){const t=i.tags.find((t=>"Rate"===t.name));t&&n.push({rate:1/parseFloat(t.value),timestamp:e.block?e.block.timestamp:parseInt((new Date).getTime().toString().slice(0,-3))})}}}}let r=[];const i=[];if(n.length>0){let t=o().add(1,"days").hours(0).minutes(0).seconds(0);for(;t.unix()>=n[n.length-1].timestamp;){const e=t.clone().subtract(1,"days"),o=n.filter((n=>n.timestamp<=t.unix()&&n.timestamp>=e.unix())).map((t=>t.rate));r.push(o.reduce(((t,e)=>t+e),0)/o.length),i.push(e.format("MMM DD")),t=e}r.every((t=>isNaN(t)))||(r=ne(r.reverse()))}return{prices:r,dates:i.reverse()}})),ie=(t,e,n,r,i)=>$t(void 0,void 0,void 0,(function*(){const o=yield((t,e)=>$t(void 0,void 0,void 0,(function*(){const n=yield P(t,e),r=jt(n)?n.state:n,i=r.balances,o=r.vault;let a=0;for(const t of Object.keys(i))a+=i[t];for(const t of Object.keys(o)){if(!o[t].length)continue;const e=o[t].map((t=>t.balance)).reduce(((t,e)=>t+e),0);a+=e,t in i?i[t]+=e:i[t]=e}const s={};for(const t of Object.keys(i))s[t]=i[t]/a;return Ut(s)})))(t,i),a=Math.ceil(.005*Math.ceil(n)),s={Exchange:"Verto",Type:"Fee-VRT-Holder","App-Name":"SmartWeaveAction","App-Version":"0.3.0",Contract:r,Input:JSON.stringify({function:"transfer",target:o,qty:a})},u=yield t.createTransaction({target:o,data:Math.random().toString().slice(-4)},e);for(const[t,e]of Object.entries(s))u.addTag(t,e);return u})),oe=(t,e,n)=>$t(void 0,void 0,void 0,(function*(){var r;const i=null===(r=(yield qt({query:Pt,variables:{owners:[e],recipients:[n]}})).data.transactions.edges[0])||void 0===r?void 0:r.node.id;return JSON.parse((yield t.transactions.getData(i,{decode:!0,string:!0})).toString()).tradeFee})),ae=(t,e)=>$t(void 0,void 0,void 0,(function*(){const n=yield t.transactions.getPrice(parseFloat(e.data_size),e.target);return parseFloat(t.ar.winstonToAr(n))})),se=(t,e,n,r)=>$t(void 0,void 0,void 0,(function*(){const i=yield P(t,e),o=jt(i)?i.state:i,a=o.balances,s=o.vault;for(const t of Object.keys(a))"invalid"===(yield Bt(t,n))&&(delete a[t],delete s[t]);let u=0;for(const t of Object.keys(a))u+=a[t];for(const t of Object.keys(s)){if(!s[t].length)continue;const e=s[t].map((t=>t.balance)).reduce(((t,e)=>t+e),0);u+=e,t in a?a[t]+=e:a[t]=e}const l={};for(const t of Object.keys(a))l[t]=a[t]/u;return yield Bt(Ut(l)||r,n)}));var ue="query($recipients: [String!], $owners: [String!], $block: Int) {\n  transactions(\n    recipients: $recipients\n    owners: $owners\n    block: { max: $block }\n  ) {\n    edges {\n      node {\n        id\n        block {\n          timestamp\n        }\n        quantity {\n          ar\n        }\n      }\n    }\n  }\n}\n";console.log=(...t)=>{var e;(null===(e=(new Error).stack)||void 0===e?void 0:e.includes("smartweave"))||console.info(...t)};class le{constructor(t,e,n){this.arweave=e||new i({host:"arweave.net",port:443,protocol:"https",logging:!1}),this.keyfile=t,this.exchangeContract=(null==n?void 0:n.exchangeContract)||"usjm4PCxUd5mtaon7zc97-dt-3qf67yPyqgzLnLqk5A",this.exchangeWallet=(null==n?void 0:n.exchangeWallet)||"aLemOhg9OGovn-0o4cOCbueiHT9VgdYnpJpq7NgMA1A"}arVolume(){return $t(void 0,void 0,void 0,(function*(){const t=(yield qt({query:'\n        query($num: Int) {\n          transactions(\n            tags: [\n              { name: "Exchange", values: "Verto" }\n              { name: "Type", values: "Buy" }\n            ]\n            first: $num\n          ) {\n            edges {\n              node {\n                quantity {\n                  ar\n                }\n                block {\n                  timestamp\n                }\n              }\n            }\n          }\n        }      \n      ',variables:{num:Ft}})).data.transactions.edges,e=[];t.map((({node:t})=>{e.push({amnt:parseFloat(t.quantity.ar),timestamp:t.block.timestamp})}));const n=[],r=[];if(e.length>0){let t=o().add(1,"days").hours(0).minutes(0).seconds(0);for(;t.unix()>=e[e.length-1].timestamp;){const i=t.clone().subtract(1,"days"),o=e.filter((e=>e.timestamp<=t.unix()&&e.timestamp>=i.unix())).map((t=>t.amnt)).reduce(((t,e)=>t+e),0);n.push(o),r.push(i.format("MMM DD")),t=i}}return{volume:n.reverse(),dates:r.reverse()}}))}chainRate(t){return Gt(this.arweave,t,this.exchangeContract,this.exchangeWallet)}createOrder(t,e,n,r,i){return this.keyfile?((t,e,n,r,i,o,a,s,u)=>$t(void 0,void 0,void 0,(function*(){const l=yield Qt(t,o,s);if(i in l.blockedTokens)return"token";const h=yield t.wallets.jwkToAddress(e),c=parseFloat(t.ar.winstonToAr(yield t.wallets.getBalance(h))),d=yield P(t,i),f=(jt(d)?d.state:d).balances[h];if("buy"===n.toLowerCase()){const n={Exchange:"Verto",Type:"Buy",Token:i},a=yield t.createTransaction({target:o,quantity:t.ar.arToWinston(r.toString())},e);for(const[t,e]of Object.entries(n))a.addTag(t,e);const u=yield((t,e,n,r)=>$t(void 0,void 0,void 0,(function*(){const i={Exchange:"Verto",Type:"Fee-Exchange"},o=.005*n,a=yield t.createTransaction({target:r,quantity:t.ar.arToWinston(o.toString())},e);for(const[t,e]of Object.entries(i))a.addTag(t,e);return a})))(t,e,r,s),l=(yield ae(t,a))+(yield ae(t,u))+r+.005*r;return c>=l?{txs:[a,u],ar:l,pst:0}:"ar"}if("sell"===n.toLowerCase()&&u){const n={Exchange:"Verto",Type:"Sell","App-Name":"SmartWeaveAction","App-Version":"0.3.0",Contract:i,Rate:1/u,Input:JSON.stringify({function:"transfer",target:o,qty:Math.ceil(r)})},l=yield t.createTransaction({target:o,data:Math.random().toString().slice(-4)},e);for(const[t,e]of Object.entries(n))l.addTag(t,e.toString());const h=yield((t,e,n,r,i,o)=>$t(void 0,void 0,void 0,(function*(){const a=Math.ceil(Math.ceil(n)*(yield oe(t,i,o))),s={Exchange:"Verto",Type:"Fee-Trading-Post","App-Name":"SmartWeaveAction","App-Version":"0.3.0",Contract:r,Input:JSON.stringify({function:"transfer",target:i,qty:a})},u=yield t.createTransaction({target:i,data:Math.random().toString().slice(-4)},e);for(const[t,e]of Object.entries(s))u.addTag(t,e);return u})))(t,e,r,i,o,s),d=yield ie(t,e,r,i,a),m=(yield ae(t,l))+((yield ae(t,h))+(yield ae(t,d))),g=Math.ceil(r)+Math.ceil(Math.ceil(r)*(yield oe(t,o,s)))+Math.ceil(.005*Math.ceil(r));return c>=m?f&&f>=g?{txs:[l,h,d],ar:m,pst:g}:"pst":"ar"}return"invalid"})))(this.arweave,this.keyfile,t,e,n,r,this.exchangeContract,this.exchangeWallet,i):new Promise((t=>t("keyfile")))}createSwap(t,e,n,r,i,o){return this.keyfile?((t,e,n,r,i,o,a,s,u,l)=>$t(void 0,void 0,void 0,(function*(){const h=yield t.wallets.jwkToAddress(e),c=parseFloat(t.ar.winstonToAr(yield t.wallets.getBalance(h)));if(a){if(!(yield Bt(h,n)))return"arLink";if(!u)return"invalid";const o={Exchange:"Verto",Type:"Swap",Chain:n,Rate:u},s=yield t.createTransaction({target:r,quantity:t.ar.arToWinston(a.toString())},e);for(const[t,e]of Object.entries(o))s.addTag(t,e.toString());const{tx:l,fee:d}=yield((t,e,n,r,i)=>$t(void 0,void 0,void 0,(function*(){const o=n*(yield oe(t,r,i)),a={Exchange:"Verto",Type:"Fee-Trading-Post"},s=yield t.createTransaction({target:r,quantity:t.ar.arToWinston(o.toString())},e);for(const[t,e]of Object.entries(a))s.addTag(t,e);return{tx:s,fee:o}})))(t,e,a,r,i),f=(yield ae(t,s))+(yield ae(t,l));return c>=f+a+d?{txs:[l,s],ar:f+a+d,chain:0}:"ar"}if(s){if(!(yield Dt(window.ethereum.selectedAddress,n)))return"arLink";const e=(yield Qt(t,r,i)).chain,a=.005*s,u=s+a;let h=yield window.ethereum.request({method:"eth_getBalance",params:[window.ethereum.selectedAddress,"latest"]});return h=parseInt(h,16)/1e18,h>=u?{txs:[{chain:n,type:"FEE",to:yield se(t,o,n,i),value:a},{chain:n,token:l,to:e[n].addr,value:s}],ar:0,chain:u}:"chain"}return"invalid"})))(this.arweave,this.keyfile,t,e,this.exchangeWallet,this.exchangeContract,n,r,i,o):new Promise((t=>t("keyfile")))}getAssets(t){return((t,e,n,r)=>$t(void 0,void 0,void 0,(function*(){const i=(t=>{const e={};return t.filter((t=>!(t.id in e)&&(e[t.id]=!0)))})([...yield Yt(t,r),...yield Zt(t,n)]),o=[];for(let n=0;n<i.length;n++){const r=yield P(t,i[n].id),a=jt(r)?r.state:r;a.balances&&a.balances[e]>0&&o.push({id:i[n].id,name:i[n].name,ticker:i[n].ticker,balance:a.balances[e],state:a})}return o.sort(((t,e)=>e.balance-t.balance)),o})))(this.arweave,t,this.exchangeContract,this.exchangeWallet)}getConfig(t){return Qt(this.arweave,t,this.exchangeWallet)}parseExchange(t){return te(this.arweave,t,this.exchangeContract,this.exchangeWallet)}getExchangeDetails(t){return((t,e,n)=>$t(void 0,void 0,void 0,(function*(){var r,i,o,s,u;try{const c=yield h(e),d=c.owner.address,f=c.recipient,m=null===(r=c.tags.find((({name:t})=>"Type"===t)))||void 0===r?void 0:r.value,g=null===(i=c.tags.find((({name:t})=>"Hash"===t)))||void 0===i?void 0:i.value,p=[],v=[];let y="",w="success";if("Buy"===m)y=parseFloat(c.quantity.ar)+" AR";else if("Sell"===m){const e=c.tags.find((t=>"Contract"===t.name));if(e){const n=yield P(t,e.value,!0);y=yield ee(c,t),jt(n)?n.validity[c.id]?(w="warning",v.push("This order was created before tags for AR transfers were added.")):(w="error",v.push("Invalid SmartWeave interaction.")):(w="error",v.push("Wrong data format for contract"))}}else if("Swap"===m){const t=null===(o=c.tags.find((t=>"Chain"===t.name)))||void 0===o?void 0:o.value,e=null===(s=c.tags.find((t=>"Value"===t.name)))||void 0===s?void 0:s.value;t&&(y=e?`${e} ${t}`:parseFloat(c.quantity.ar)+" AR")}if(p.push({id:e,description:`${m} - ${y}`}),"Buy"===m){const n=yield l('\n          query($post: String!, $order: [String!]!) {\n            transactions(\n              owners: [$post]\n              tags: [\n                { name: "Exchange", values: "Verto" }\n                { name: "Type", values: "PST-Transfer" }\n                { name: "Order", values: $order }\n              ]\n            ) {\n              edges {\n                node {\n                  id\n                  tags {\n                    name\n                    value\n                  }\n                }\n              }\n            }\n        }\n        ',{post:f,order:e});for(const e of n.data.transactions.edges){const n=yield ee(e.node,t),r=e.node.tags.find((t=>"Match"===t.name));p.push({id:e.node.id,description:"PST Transfer - "+n,match:null==r?void 0:r.value})}}if("Sell"===m){const n=yield l('\n          query($post: String!, $order: [String!]!) {\n            transactions(\n              owners: [$post]\n              tags: [\n                { name: "Exchange", values: "Verto" }\n                { name: "Type", values: "AR-Transfer" }\n                { name: "Order", values: $order }\n              ]\n            ) {\n              edges {\n                node {\n                  id\n                  quantity {\n                    ar\n                  }\n                  tags {\n                    name\n                    value\n                  }\n                }\n              }\n            }\n          }\n        ',{post:f,order:e});for(const e of n.data.transactions.edges){const n=yield ee(e.node,t),r=e.node.tags.find((t=>"Match"===t.name));p.push({id:e.node.id,description:"AR Transfer - "+n,match:null==r?void 0:r.value})}}if("Swap"===m&&g){const e=yield l('\n            query($post: String!, $order: [String!]!) {\n              transactions(\n                owners: [$post]\n                tags: [\n                  { name: "Exchange", values: "Verto" }\n                  { name: "Type", values: "AR-Transfer" }\n                  { name: "Order", values: $order }\n                ]\n              ) {\n                edges {\n                  node {\n                    id\n                    quantity {\n                      ar\n                    }\n                  }\n                }\n              }\n            }\n          ',{post:f,order:g});for(const t of e.data.transactions.edges)p.push({id:t.node.id,description:`AR Transfer - ${parseFloat(t.node.quantity.ar)} AR`});if(0===e.data.transactions.edges.length){const e=yield Qt(t,f,n),r=e.publicURL.startsWith("https://")?e.publicURL:"https://"+e.publicURL,i=r.endsWith("/")?"orders":"/orders",o=yield a(r+i),s=(yield o.clone().json()).find((t=>"TX_STORE"===t.token)).orders.find((t=>t.txHash===g));s&&1===s.parsed&&(w="error",v.push("An error occured. Most likely the Ethereum hash submitted is invalid."))}}const M=yield l('\n        query($post: String!, $order: [String!]!) {\n          transactions(\n            recipients: [$post]\n            tags: [\n              { name: "Exchange", values: "Verto" }\n              { name: "Type", values: "Cancel" }\n              { name: "Order", values: $order }\n            ]\n            first: 1\n          ) {\n            edges {\n              node {\n                id\n              }\n            }\n          }\n        }\n      ',{post:f,order:e});M.data.transactions.edges[0]&&(w="secondary",p.push({id:M.data.transactions.edges[0].node.id,description:"Cancel"}));const b=yield l('\n        query($post: String!, $order: [String!]!) {\n          transactions(\n            owners: [$post]\n            tags: [\n              { name: "Exchange", values: "Verto" }\n              { name: "Type", values: "Refund" }\n              { name: "Order", values: $order }\n            ]\n            first: 1\n          ) {\n            edges {\n              node {\n                id\n                quantity {\n                  ar\n                }\n                tags {\n                  name\n                  value\n                }\n              }\n            }\n          }\n        }\n      ',{post:f,order:e});if(b.data.transactions.edges[0]){const e=b.data.transactions.edges[0].node;let n="";"Buy"===m&&(n=parseFloat(e.quantity.ar)+" AR"),"Sell"===m&&(n=yield ee(e,t)),w="secondary",p.push({id:e.id,description:"Refund - "+n})}const x=yield l(`\n        query($post: String!, $order: [String!]!) {\n          transactions(\n            owners: [$post]\n            tags: [\n              { name: "Exchange", values: "Verto" }\n              { name: "Type", values: "${m}-Return" }\n              { name: "Order", values: $order }\n            ]\n            first: 1\n          ) {\n            edges {\n              node {\n                id\n                quantity {\n                  ar\n                }\n                tags {\n                  name\n                  value\n                }\n              }\n            }\n          }\n        }\n      `,{post:f,order:e});if(x.data.transactions.edges[0]){const e=x.data.transactions.edges[0].node;let n="";"Buy"===m&&(n=parseFloat(e.quantity.ar)+" AR"),"Sell"===m&&(n=yield ee(e,t)),w="secondary",p.push({id:e.id,description:"Return - "+n})}if("Buy"===m||"Sell"===m){const t=yield l('\n          query($post: String!, $order: [String!]!) {\n            transactions(\n              owners: [$post]\n              tags: [\n                { name: "Exchange", values: "Verto" }\n                { name: "Type", values: "Confirmation" }\n                { name: "Match", values: $order }\n              ]\n              first: 1\n            ) {\n              edges {\n                node {\n                  id\n                  tags {\n                    name\n                    value\n                  }\n                }\n              }\n            }\n          }\n        ',{post:f,order:e});if(t.data.transactions.edges[0]){const e=null===(u=t.data.transactions.edges[0].node.tags.find((t=>"Received"===t.name)))||void 0===u?void 0:u.value;w="success",p.push({id:t.data.transactions.edges[0].node.id,description:"Confirmation - "+e})}}return{id:e,owner:d,post:f,type:m,hash:g,value:y,status:w,messages:v,orders:p}}catch(t){throw new Error(t)}})))(this.arweave,t,this.exchangeWallet)}getExchanges(t){return((t,e,n,r)=>$t(void 0,void 0,void 0,(function*(){const i=[],o=(yield l('query($addr: String!, $num: Int) {\n  transactions(\n    owners: [$addr]\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: ["Buy", "Sell", "Swap"] }\n    ]\n    first: $num\n  ) {\n    edges {\n      node {\n        id\n        block {\n          timestamp\n        }\n        quantity {\n          ar\n        }\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n',{addr:e,num:5})).data.transactions.edges;for(const e of o){const o=yield te(t,e,n,r);o&&i.push(o)}return i})))(this.arweave,t,this.exchangeContract,this.exchangeWallet)}paginateExchanges(t,e){return((t,e,n,r,i)=>$t(void 0,void 0,void 0,(function*(){const o=[],{edges:a,pageInfo:{hasNextPage:s}}=(yield l('query($addr: String!, $cursor: String) {\n  transactions(\n    owners: [$addr]\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: ["Buy", "Sell", "Swap"] }\n    ]\n    after: $cursor\n    first: 5\n  ) {\n    pageInfo {\n      hasNextPage\n    }\n    edges {\n      cursor\n      node {\n        id\n        block {\n          timestamp\n        }\n        quantity {\n          ar\n        }\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n',{addr:e,cursor:i})).data.transactions;if(a.length<1)return{exchanges:[],cursor:void 0};for(const e of a){const i=yield te(t,e,n,r);i&&o.push(i)}return{exchanges:o,cursor:s?void 0:a[a.length-1].cursor}})))(this.arweave,t,this.exchangeContract,this.exchangeWallet,e)}getOrderBook(t){return((t,e,n)=>$t(void 0,void 0,void 0,(function*(){const r=yield Qt(t,e,n);if("invalid"===r)throw new Error("Invalid genesis");const i=r.publicURL.startsWith("https://")?r.publicURL:"https://"+r.publicURL,o=i.endsWith("/")?"orders":"/orders";try{return(yield(yield a(i+o)).clone().json()).filter((t=>"TX_STORE"!==t.token))}catch(t){throw new Error("Could not get orderbook")}})))(this.arweave,t,this.exchangeWallet)}getPostStake(t){return Wt(this.arweave,t,this.exchangeContract)}getReputation(t){return Lt(this.arweave,t,this.exchangeContract)}getTokens(){return Zt(this.arweave,this.exchangeContract)}getTPTokens(t){return((t,e,n,r)=>$t(void 0,void 0,void 0,(function*(){const i=yield Qt(t,e,r),o=[...yield Yt(t,r),...yield Zt(t,n)];return i.blockedTokens.map((t=>{const e=o.find((e=>e.id===t));let n=-1;e&&(n=o.indexOf(e)),n>-1&&o.splice(n,1)})),(t=>{const e={};return t.filter((t=>!(t.id in e)&&(e[t.id]=!0)))})(o)})))(this.arweave,t,this.exchangeContract,this.exchangeWallet)}getTradingPosts(){return Vt(this.arweave,this.exchangeContract,this.exchangeWallet)}getTransactions(t){return((t,e)=>$t(void 0,void 0,void 0,(function*(){let n=[];const r=(yield t.network.getInfo()).height,i=(yield qt({query:ue,variables:{owners:[e],block:r}})).data.transactions.edges,o=(yield qt({query:ue,variables:{recipients:[e],block:r}})).data.transactions.edges;i.map((({node:t})=>{n.push({id:t.id,amount:parseFloat(parseFloat(t.quantity.ar).toFixed(2)),type:"out",status:"",timestamp:t.block.timestamp})})),o.map((({node:t})=>{n.push({id:t.id,amount:parseFloat(parseFloat(t.quantity.ar).toFixed(2)),type:"in",status:"",timestamp:t.block.timestamp})})),n.sort(((t,e)=>e.timestamp-t.timestamp)),n=n.slice(0,5);for(let e=0;e<n.length;e++)try{200===(yield t.transactions.getStatus(n[e].id)).status?n[e].status="success":n[e].status="pending"}catch(t){console.log(t)}return n})))(this.arweave,t)}latestChainRate(t){return((t,e,n,r)=>$t(void 0,void 0,void 0,(function*(){const i=yield Gt(t,e,n,r);return i.rates[i.rates.length-1]})))(this.arweave,t,this.exchangeContract,this.exchangeWallet)}latestPrice(t){return(t=>$t(void 0,void 0,void 0,(function*(){const e=yield re(t);if(e)return e.prices[e.prices.length-1]})))(t)}latestVolume(t){return(t=>$t(void 0,void 0,void 0,(function*(){const e=(yield qt({query:Jt,variables:{token:t,num:Ft}})).data.transactions.edges,n=[];if(e.map((({node:t})=>{const e=t.tags.find((t=>"Input"===t.name));e&&n.push({amnt:JSON.parse(e.value).qty,timestamp:t.block.timestamp})})),n.length>0){const t=o().add(1,"days").hours(0).minutes(0).seconds(0),e=t.clone().subtract(1,"days");return n.filter((n=>n.timestamp<=t.unix()&&n.timestamp>=e.unix())).map((t=>t.amnt)).reduce(((t,e)=>t+e),0)}return 0})))(t)}popularTokens(){return Yt(this.arweave,this.exchangeWallet)}price(t){return re(t)}recommendPost(){return t=this.arweave,e=this.exchangeContract,n=this.exchangeWallet,$t(void 0,void 0,void 0,(function*(){const r=yield Vt(t,e,n),i={};let o=0;for(const n of r){const r=yield Lt(t,n,e);i[n]=r,o+=r}const a={};for(const t of r)a[t]=i[t]/o;return Ut(a)}));var t,e,n}saveToken(t){return this.keyfile?((t,e,n,r,i)=>$t(void 0,void 0,void 0,(function*(){if("undefined"!=typeof window){if(!(yield Zt(t,r)).find((t=>t.id===e))){if(0===(yield qt({query:'\n            query($exchange: String!, $user: String!, $contract: [String!]!) {\n              transactions(\n                owners: [$user]\n                recipients: [$exchange]\n                tags: [\n                  { name: "Exchange", values: "Verto" }\n                  { name: "Type", values: "Token" }\n                  { name: "Contract", values: $contract }\n                ]\n                first: 2147483647\n              ) {\n                edges {\n                  node {\n                    owner {\n                      address\n                    }\n                  }\n                }\n              }\n            }\n          ',variables:{exchange:i,user:yield t.wallets.jwkToAddress(n),contract:e}})).data.transactions.edges.length){const r={Exchange:"Verto",Type:"Token",Contract:e},o=yield t.createTransaction({target:i,data:Math.random().toString().slice(-4)},n);for(const[t,e]of Object.entries(r))o.addTag(t,e);yield t.transactions.sign(o,n),yield t.transactions.post(o)}const r=JSON.parse(localStorage.getItem("tokens")||"[]");r.push(e),localStorage.setItem("tokens",JSON.stringify(r))}return e}})))(this.arweave,t,this.keyfile,this.exchangeContract,this.exchangeWallet):new Promise((t=>t()))}sendOrder(t){return this.keyfile?((t,e,n)=>$t(void 0,void 0,void 0,(function*(){for(const r of n){yield t.transactions.sign(r,e),yield t.transactions.post(r);for(const t of r.tags){const e=t.get("name",{decode:!0,string:!0}),n=t.get("value",{decode:!0,string:!0});"Type"!==e||"Swap"!==n&&"Buy"!==n&&"Sell"!==n||a("https://hook.verto.exchange/api/transaction?id="+r.id)}}})))(this.arweave,this.keyfile,t):new Promise((t=>t("keyfile")))}sendSwap(t,e){return this.keyfile?((t,e,n,r)=>$t(void 0,void 0,void 0,(function*(){for(const i of n)if(i.tags){yield t.transactions.sign(i,e),yield t.transactions.post(i);for(const t of i.tags){const e=t.get("name",{decode:!0,string:!0}),n=t.get("value",{decode:!0,string:!0});"Type"!==e||"Swap"!==n&&"Buy"!==n&&"Sell"!==n||a("https://hook.verto.exchange/api/transaction?id="+i.id)}}else if("ETH"===i.chain&&"undefined"!=typeof window&&void 0!==window.ethereum){const n=i.value.toString().split(".")[0].length;i.value=parseFloat(It(i.value.toFixed(18-n).toString()).toString()),yield window.ethereum.request({method:"eth_requestAccounts"});const o=yield window.ethereum.request({method:"eth_sendTransaction",params:[{to:i.to,from:window.ethereum.selectedAddress,value:i.value.toString(16)}]});if(!i.type){const n={Exchange:"Verto",Type:"Swap",Chain:i.chain,Hash:o,Value:i.value/1e18},s=yield t.createTransaction({target:r,data:Math.random().toString().slice(-4)},e);for(const[t,e]of Object.entries(n))s.addTag(t,e.toString());i.token&&s.addTag("Token",i.token),yield t.transactions.sign(s,e),yield t.transactions.post(s),a("https://hook.verto.exchange/api/transaction?id="+s.id)}}})))(this.arweave,this.keyfile,t,e):new Promise((t=>t("keyfile")))}volume(t){return zt(t)}}export{le as V,O as l,l as r};
