import{S as t,i as e,s as n,F as o,b as r,d as a,e as s,t as i,M as l,j as c,h as u,m as h,f as d,g as m,k as f,o as v,I as g,p,r as y,q as k,u as b,y as w,z as $,N as C,O as x,X as E,a as I,G as S,R as A,H as N,v as L,w as M,x as j}from"./client.0f0e9ea5.js";import{c as D,i as T,d as F,j as q,A as O,k as P}from"./settings.bc92b9ed.js";import{l as V,V as B,r as W}from"./index.es.9a18cd9e.js";import{L as Y}from"./Line.743c143a.js";import{N as _}from"./NavBar.504604fd.js";import{F as z}from"./Footer.a900e9c6.js";import{S as R}from"./SkeletonLoading.003a53ee.js";import{L as X}from"./Loading.f68b7627.js";import{B as H}from"./Button.f30785b0.js";import"./moment.7288240e.js";var Z=D((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class n{static trimObj(t){return null===t||!Array.isArray(t)&&"object"!=typeof t?t:Object.keys(t).reduce(((e,o)=>(e[o.trim()]="string"==typeof t[o]?t[o].trim():n.trimObj(t[o]),e)),Array.isArray(t)?[]:{})}static formatNumber(t,e=0,n=".",o=","){try{e=Math.abs(e),e=isNaN(e)?2:e;const r=t<0?"-":"",a=parseInt(Math.abs(Number(t)||0).toFixed(e),10).toString(),s=a.length>3?a.length%3:0;return r+(s?a.substr(0,s)+o:"")+a.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+o)+(e?n+Math.abs(t-+a).toFixed(e).slice(2):"")}catch(t){console.log(t)}}static formatBlocks(t=720){const e=20160,n=241920;let o="";if(t>=n){const e=Math.round(t/n);o=`~${e} ${1===e?"year":"years"}`}else if(t>=e){const n=Math.round(t/e);o=`~${n} ${1===n?"month":"months"}`}else if(t>=720){const e=Math.round(t/720);o=`~${e} ${1===e?"day":"days"}`}else if(t>=30){const e=Math.round(t/30);o=`~${e} ${1===e?"hour":"hours"}`}else o="<1 hour";return o}}e.default=n})),U=q(D((function(t,e){var n=F&&F.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function s(t){try{l(o.next(t))}catch(t){a(t)}}function i(t){try{l(o.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,i)}l((o=o.apply(t,e||[])).next())}))},o=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(T),a=o(Z);e.default=class{constructor(t,e,n=12e4){this.cacheServer="https://cache.community.xyz/",this.contractSrc="ngMml4jmlxu0umpiQCsHgPX2pb_Yz6YDB8f7G6j-tpI",this.mainContract="mzvUgNc8YFk0w5K5H7c8pyT-FC5Y_ba0r7_8766Kx74",this.txFee=.21,this.createFee=.83,this.communityContract="",this.firstCall=!0,this.cacheRefreshInterval=12e4,this.stateCallInProgress=!1,this.arweave=t,e&&(this.wallet=e,t.wallets.jwkToAddress(e).then((t=>this.walletAddress=t)).catch(console.log)),n&&(this.cacheRefreshInterval=n)}getMainContractId(){return n(this,void 0,void 0,(function*(){return this.mainContract}))}getCommunityContract(){return n(this,void 0,void 0,(function*(){return this.communityContract}))}getState(t=!0){return n(this,void 0,void 0,(function*(){if(!this.communityContract.length)throw new Error("No community set. Use setCommunityTx to get your current state.");return this.firstCall?(this.firstCall=!1,this.update(!0)):t&&this.state?this.state:this.update(!1)}))}setWallet(t){return n(this,void 0,void 0,(function*(){return this.wallet=t,this.walletAddress=yield this.arweave.wallets.jwkToAddress(this.wallet),this.walletAddress}))}setState(t,e,o,r=50,s=50,i=2e3,l=720,c=1e4,u={},h=[],d={},m=[]){return n(this,void 0,void 0,(function*(){if(yield this.checkWallet(),t||(t=""),e||(e=""),o||(o={}),r||(r=0),s||(s=0),i||(i=0),l||(l=0),c||(c=0),u||(u={}),h||(h=[]),d||(d={}),m||(m=[]),t=t.trim(),e=e.trim(),o=a.default.trimObj(o),r=+r,s=+s,i=+i,l=+l,c=+c,u=a.default.trimObj(u),h=a.default.trimObj(h),d=a.default.trimObj(d),t.length<3)throw new Error("Community Name must be at least 3 characters.");if(e.length<3)throw new Error("Ticker must be at least 3 characters.");if(!Object.keys(o).length)throw new Error("At least one account need to be specified.");for(const t in o)if(isNaN(o[t])||!Number.isInteger(o[t])||o[t]<1)throw new Error("Address balances must be a positive integer.");if(isNaN(r)||r<1||r>99||!Number.isInteger(r))throw new Error("Quorum must be an integer between 1-99.");if(r/=100,isNaN(s)||s<1||s>99||!Number.isInteger(s))throw new Error("Support must be an integer between 1-99.");if(s/=100,isNaN(i)||!Number.isInteger(i)||i<1)throw new Error("Vote Length must be a positive integer.");if(isNaN(l)||l<1||!Number.isInteger(l))throw new Error("Lock Min Length must be a positive integer.");if(isNaN(c)||c<l||!Number.isInteger(c))throw new Error("Lock Max Length must be a positive integer, greater than lockMinLength.");if(Object.keys(u).length)for(const t of Object.keys(u))for(const e in u[t])if(isNaN(u[t][e].balance)||!Number.isInteger(u[t][e])||u[t][e].balance<1)throw new Error("Vault balance must be a positive integer.");const n=[["quorum",r],["support",s],["voteLength",i],["lockMinLength",l],["lockMaxLength",c]];for(let t=0,e=m.length;t<e;t++){const e=m[t];"string"==typeof e[0]&&void 0!==e[1]&&n.push(e)}return this.state={name:t,ticker:e,balances:o,vault:u,votes:h,roles:d,settings:new Map(n)},this.state}))}create(t=[]){return n(this,void 0,void 0,(function*(){const{target:e,winstonQty:n}=yield this.chargeFee(this.createFee),o=this.state;o.settings=Array.from(this.state.settings),t=[...yield this.cleanTags(t),{name:"Action",value:"CreateCommunity"},{name:"Message",value:`Created Community ${this.state.name}, ticker: ${this.state.ticker}.`},{name:"Service",value:"CommunityXYZ"}];const r=yield V.createContractFromTx(this.arweave,this.wallet,this.contractSrc,JSON.stringify(o),t,e,n);return this.communityContract=r,r}))}getCreateCost(t=!1,e){return n(this,void 0,void 0,(function*(){const n=this.arweave.ar.arToWinston(this.createFee.toString());return t?this.arweave.ar.winstonToAr(n,e):n}))}getActionCost(t=!1,e){return n(this,void 0,void 0,(function*(){const n=this.arweave.ar.arToWinston(this.txFee.toString());return t?this.arweave.ar.winstonToAr(n,e):n}))}setCommunityTx(t){return n(this,void 0,void 0,(function*(){this.state=null,this.communityContract=t;try{yield this.getState(!1)}catch(t){return this.state=null,this.communityContract=null,console.log(t),!1}return!0}))}get(t={function:"balance"}){return n(this,void 0,void 0,(function*(){return this.wallet||this.dummyWallet||(this.dummyWallet=yield this.arweave.wallets.generate()),V.interactRead(this.arweave,this.wallet||this.dummyWallet,this.communityContract,t)}))}getBalance(t=this.walletAddress){return n(this,void 0,void 0,(function*(){return(yield this.get({function:"balance",target:t})).balance}))}getUnlockedBalance(t=this.walletAddress){return n(this,void 0,void 0,(function*(){return(yield this.get({function:"unlockedBalance",target:t})).balance}))}getVaultBalance(t=this.walletAddress){return n(this,void 0,void 0,(function*(){return(yield this.get({function:"vaultBalance",target:t})).balance}))}getRole(t=this.walletAddress){return n(this,void 0,void 0,(function*(){return(yield this.get({function:"role",target:t})).role}))}selectWeightedHolder(t=this.state.balances,e=this.state.vault){return n(this,void 0,void 0,(function*(){if(!this.state)throw new Error("Need to initilate the state and worker.");let n=0;for(const e of Object.keys(t))n+=t[e];for(const o of Object.keys(e)){if(!e[o].length)continue;const r=e[o].map((t=>t.balance)).reduce(((t,e)=>t+e),0);n+=r,o in t?t[o]+=r:t[o]=r}const o={};for(const e of Object.keys(t))o[e]=t[e]/n;let r=0;const a=Math.random();for(const t of Object.keys(o))if(r+=o[t],a<=r&&o[t]>0)return t;return null}))}transfer(t,e,o=[]){return n(this,void 0,void 0,(function*(){return o=[...yield this.cleanTags(o),{name:"Action",value:"transfer"},{name:"Message",value:`Transfer to ${t} of ${a.default.formatNumber(e)}.`},{name:"Community-ID",value:this.communityContract},{name:"Service",value:"CommunityXYZ"}],this.interact({function:"transfer",target:t,qty:e},o)}))}lockBalance(t,e,o=[]){return n(this,void 0,void 0,(function*(){return o=[...yield this.cleanTags(o),{name:"Action",value:"lock"},{name:"Message",value:`Locked ${a.default.formatNumber(t)} for ${a.default.formatNumber(e)} blocks (${a.default.formatBlocks(e)}).`},{name:"Community-ID",value:this.communityContract},{name:"Service",value:"CommunityXYZ"}],this.interact({function:"lock",qty:t,lockLength:e},o)}))}unlockVault(t=[]){return n(this,void 0,void 0,(function*(){return t=[...yield this.cleanTags(t),{name:"Action",value:"unlock"},{name:"Message",value:"Unlocked vaults."},{name:"Community-ID",value:this.communityContract},{name:"Service",value:"CommunityXYZ"}],this.interact({function:"unlock"},t)}))}increaseVault(t,e,o=[]){return n(this,void 0,void 0,(function*(){return o=[...yield this.cleanTags(o),{name:"Action",value:"increase"},{name:"Message",value:`Increased vault ID ${t} for ${e} blocks (${a.default.formatBlocks(e)}).`},{name:"Community-ID",value:this.communityContract},{name:"Service",value:"CommunityXYZ"}],this.interact({function:"increaseVault",id:t,lockLength:e},o)}))}proposeVote(t,e=[]){return n(this,void 0,void 0,(function*(){const n=JSON.parse(JSON.stringify(t));if(console.log(n),"set"===n.type){if("quorum"!==n.key&&"support"!==n.key&&"lockMinLength"!==n.key&&"lockMaxLength"!==n.key||(n.value=+n.value),"quorum"===n.key||"support"===n.key)if(n.value>0&&n.value<100)n.value=n.value/100;else if(n.value<=0||n.value>=100)throw new Error("Invalid value.");if("lockMinLength"===n.key&&(n.value<1||n.value>this.state.settings.get("lockMaxLength")))throw new Error("Invalid minimum lock length.");if("lockMaxLength"===n.key&&(n.value<1||n.value<this.state.settings.get("lockMinLength")))throw new Error("Invalid maximum lock length.")}const o=Object.assign(Object.assign({},n),{function:"propose"});return e=[...yield this.cleanTags(e),{name:"Action",value:"propose"},{name:"Message",value:`Proposed ${"indicative"===n.type||"other"===n.key?"an":"a"} ${n.key||n.type} vote, value: ${n.value}.`},{name:"Community-ID",value:this.communityContract},{name:"Service",value:"CommunityXYZ"}],this.interact(o,e)}))}vote(t,e,o=[]){return n(this,void 0,void 0,(function*(){return o=[...yield this.cleanTags(o),{name:"Action",value:"vote"},{name:"Message",value:`Voted on vote ID ${t}: ${e}.`},{name:"Community-ID",value:this.communityContract},{name:"Service",value:"CommunityXYZ"}],this.interact({function:"vote",id:t,cast:e},o)}))}finalize(t,e=[]){return n(this,void 0,void 0,(function*(){return e=[...yield this.cleanTags(e),{name:"Action",value:"finalize"},{name:"Message",value:"Finalize completed votes."},{name:"Community-ID",value:this.communityContract},{name:"Service",value:"CommunityXYZ"}],this.interact({function:"finalize",id:t},e)}))}chargeFee(t=this.txFee){return n(this,void 0,void 0,(function*(){if(+(yield this.arweave.wallets.getBalance(this.walletAddress))<+t)throw new Error("Not enough balance.");let e;try{e=(yield r.default(`${this.cacheServer}contract/${this.mainContract}`)).data}catch(t){e=yield V.readContract(this.arweave,this.mainContract)}const n=yield this.selectWeightedHolder(e.balances,e.vault);return n===this.walletAddress?{target:"",winstonQty:"0"}:{target:n,winstonQty:this.arweave.ar.arToWinston(t.toString())}}))}checkWallet(){return n(this,void 0,void 0,(function*(){if(!this.wallet)throw new Error("You first need to set the user wallet, you can do this while on new Community(..., wallet) or using setWallet(wallet).")}))}cleanTags(t){return n(this,void 0,void 0,(function*(){if(!t||!t.length)return[];const e=["action","message","community-id","service","type"],n=[];for(const o of t)o.name&&o.value&&(e.includes(o.name.toLowerCase())||n.push({name:o.name.toString(),value:o.value.toString()}));return n}))}update(t=!1){return n(this,void 0,void 0,(function*(){if(!this.communityContract.length)return void setTimeout((()=>this.update()),this.cacheRefreshInterval);if(this.stateCallInProgress){const t=()=>n(this,void 0,void 0,(function*(){return this.stateCallInProgress?new Promise((e=>setTimeout((()=>e(t())),1e3))):this.state}));return t()}let e;this.stateCallInProgress=!0;try{e=(yield r.default(`${this.cacheServer}contract/${this.communityContract}`)).data}catch(t){e=yield V.readContract(this.arweave,this.communityContract)}return e.settings=new Map(e.settings),this.state=e,this.stateCallInProgress=!1,t&&setTimeout((()=>this.update(!0)),this.cacheRefreshInterval),this.state}))}interact(t,e,o=this.txFee){return n(this,void 0,void 0,(function*(){const{target:n,winstonQty:r}=yield this.chargeFee(o);e.push({name:"Type",value:"ArweaveActivity"});const a=yield V.interactWriteDryRun(this.arweave,this.wallet,this.communityContract,t,e,n,r);if("error"===a.type)throw new Error(a.result);return V.interactWrite(this.arweave,this.wallet,this.communityContract,t,e,n,r)}))}}})));function Q(t,e,n){const o=t.slice();return o[27]=e[n],o}function G(t){return{c:I,l:I,m:I,p:I,i:I,o:I,d:I}}function J(t){let e,n;return{c(){e=s("img"),this.h()},l(t){e=d(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){v(e,"class","logo svelte-1owgsqs"),e.src!==(n=`https://arweave.net/${t[34]}`)&&v(e,"src",n),v(e,"alt","Community Logo")},m(t,n){p(t,e,n)},p:I,i:I,o:I,d(t){t&&c(e)}}}function K(t){let e,n;return e=new R({}),{c(){a(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p:I,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){$(e,t)}}}function tt(t){return{c:I,l:I,m:I,p:I,i:I,o:I,d:I}}function et(t){let e,n=t[33]+"";return{c(){e=i(n)},l(t){e=f(t,n)},m(t,n){p(t,e,n)},p:I,i:I,o:I,d(t){t&&c(e)}}}function nt(t){let e,n;return e=new R({props:{style:"width: 10%;"}}),{c(){a(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p:I,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){$(e,t)}}}function ot(t){return{c:I,l:I,m:I,p:I,i:I,o:I,d:I}}function rt(t){let e,n,o=t[32]+"";return{c(){e=s("span"),n=i(o),this.h()},l(t){e=d(t,"SPAN",{class:!0});var r=m(e);n=f(r,o),r.forEach(c),this.h()},h(){v(e,"class","ticker svelte-1owgsqs")},m(t,o){p(t,e,o),k(e,n)},p:I,i:I,o:I,d(t){t&&c(e)}}}function at(t){let e,n;return e=new R({props:{style:"width: 10%;"}}),{c(){a(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p:I,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){$(e,t)}}}function st(t){let e;return{c(){e=i("Swap")},l(t){e=f(t,"Swap")},m(t,n){p(t,e,n)},d(t){t&&c(e)}}}function it(t){return{c:I,l:I,m:I,p:I,i:I,o:I,d:I}}function lt(t){let e,n,o,r;const a=[ut,ct],s=[];return e=function(t,e){return t[31].prices.every(t[11])?0:1}(t),n=s[e]=a[e](t),{c(){n.c(),o=S()},l(t){n.l(t),o=S()},m(t,n){s[e].m(t,n),p(t,o,n),r=!0},p(t,e){n.p(t,e)},i(t){r||(b(n),r=!0)},o(t){w(n),r=!1},d(t){s[e].d(t),t&&c(o)}}}function ct(t){let e,n;return e=new Y({props:{data:{labels:t[31].dates,datasets:[{label:"AR",data:t[31].prices,backgroundColor:"rgba(230, 152, 232, 0.2)",borderColor:Nt,pointBackgroundColor:Lt}]},options:{elements:{point:{radius:0},line:{borderWidth:5,borderCapStyle:"round"}},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{gridLines:{display:!1},scaleLabel:{display:!1},ticks:{display:!1}}],yAxes:[{gridLines:{display:!1},scaleLabel:{display:!1},ticks:{display:!1}}]}}}}),{c(){a(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p:I,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){$(e,t)}}}function ut(t){let e,n,o;return{c(){e=s("p"),n=i("no data"),this.h()},l(t){e=d(t,"P",{class:!0});var o=m(e);n=f(o,"no data"),o.forEach(c),this.h()},h(){v(e,"class","svelte-1owgsqs")},m(t,o){p(t,e,o),k(e,n)},p:I,i(t){o||L((()=>{o=M(e,j,{duration:130}),o.start()}))},o:I,d(t){t&&c(e)}}}function ht(t){let e,n,o;return n=new X({props:{style:"width: 26px; height: 26px; animation-duration: .8s;"}}),{c(){e=s("div"),a(n.$$.fragment),this.h()},l(t){e=d(t,"DIV",{style:!0});var o=m(e);h(n.$$.fragment,o),o.forEach(c),this.h()},h(){g(e,"position","absolute"),g(e,"top","50%"),g(e,"left","50%"),g(e,"transform","translate(-50%, -50%)")},m(t,r){p(t,e,r),y(n,e,null),o=!0},p:I,i(t){o||(b(n.$$.fragment,t),o=!0)},o(t){w(n.$$.fragment,t),o=!1},d(t){t&&c(e),$(n)}}}function dt(t){return{c:I,l:I,m:I,p:I,i:I,o:I,d:I}}function mt(t){let e,n,o=t[30]+"";return{c(){e=s("p"),n=i(o),this.h()},l(t){e=d(t,"P",{class:!0});var r=m(e);n=f(r,o),r.forEach(c),this.h()},h(){v(e,"class","svelte-1owgsqs")},m(t,o){p(t,e,o),k(e,n)},p:I,i:I,o:I,d(t){t&&c(e)}}}function ft(t){let e,n;return e=new R({}),{c(){a(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p:I,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){$(e,t)}}}function vt(t){return{c:I,l:I,m:I,p:I,i:I,o:I,d:I}}function gt(t){let e,n,o,a,l,h,g,y,b=t[0].substring(0,3)+"",w=t[26],$=[];for(let e=0;e<w.length;e+=1)$[e]=pt(Q(t,w,e));return{c(){e=s("ul");for(let t=0;t<$.length;t+=1)$[t].c();n=r(),o=s("li"),a=s("a"),l=i("community.xyz/#"),h=i(b),g=i("..."),this.h()},l(t){e=d(t,"UL",{});var r=m(e);for(let t=0;t<$.length;t+=1)$[t].l(r);n=u(r),o=d(r,"LI",{});var s=m(o);a=d(s,"A",{href:!0});var i=m(a);l=f(i,"community.xyz/#"),h=f(i,b),g=f(i,"..."),i.forEach(c),s.forEach(c),r.forEach(c),this.h()},h(){v(a,"href",y="https://community.xyz/#"+t[0])},m(t,r){p(t,e,r);for(let t=0;t<$.length;t+=1)$[t].m(e,null);k(e,n),k(e,o),k(o,a),k(a,l),k(a,h),k(a,g)},p(t,o){if(128&o[0]){let r;for(w=t[26],r=0;r<w.length;r+=1){const a=Q(t,w,r);$[r]?$[r].p(a,o):($[r]=pt(a),$[r].c(),$[r].m(e,n))}for(;r<$.length;r+=1)$[r].d(1);$.length=w.length}1&o[0]&&b!==(b=t[0].substring(0,3)+"")&&A(h,b),1&o[0]&&y!==(y="https://community.xyz/#"+t[0])&&v(a,"href",y)},i:I,o:I,d(t){t&&c(e),N($,t)}}}function pt(t){let e,n,o,r=t[27]+"";return{c(){e=s("li"),n=s("a"),o=i(r),this.h()},l(t){e=d(t,"LI",{});var a=m(e);n=d(a,"A",{href:!0});var s=m(n);o=f(s,r),s.forEach(c),a.forEach(c),this.h()},h(){v(n,"href",t[27])},m(t,r){p(t,e,r),k(e,n),k(n,o)},p:I,d(t){t&&c(e)}}}function yt(t){let e,n;return e=new R({}),{c(){a(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p:I,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){$(e,t)}}}function kt(t){return{c:I,l:I,m:I,p:I,i:I,o:I,d:I}}function bt(t){let e,n,o,r,a=Math.round(t[25])+"";return{c(){e=s("p"),n=i("Market Cap: ~$"),o=i(a),r=i(" USD"),this.h()},l(t){e=d(t,"P",{class:!0});var s=m(e);n=f(s,"Market Cap: ~$"),o=f(s,a),r=f(s," USD"),s.forEach(c),this.h()},h(){v(e,"class","svelte-1owgsqs")},m(t,a){p(t,e,a),k(e,n),k(e,o),k(e,r)},p:I,i:I,o:I,d(t){t&&c(e)}}}function wt(t){let e,n;return e=new R({}),{c(){a(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p:I,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){$(e,t)}}}function $t(t){return{c:I,l:I,m:I,p:I,i:I,o:I,d:I}}function Ct(t){let e,n,o,r=t[24]+"";return{c(){e=s("p"),n=i("Circulating Supply: "),o=i(r),this.h()},l(t){e=d(t,"P",{class:!0});var a=m(e);n=f(a,"Circulating Supply: "),o=f(a,r),a.forEach(c),this.h()},h(){v(e,"class","svelte-1owgsqs")},m(t,r){p(t,e,r),k(e,n),k(e,o)},p:I,i:I,o:I,d(t){t&&c(e)}}}function xt(t){let e,n;return e=new R({}),{c(){a(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p:I,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){$(e,t)}}}function Et(t){return{c:I,l:I,m:I,p:I,i:I,o:I,d:I}}function It(t){let e,n,o,a,l,h,g,y,b,w,$,C,x,E=t[23]+"";return{c(){e=s("p"),n=i("Total Supply: "),o=i(E),a=r(),l=s("hr"),h=r(),g=s("p"),y=i("Powered by "),b=s("a"),w=i("Limestone"),$=i(" and "),C=s("a"),x=i("CommunityXYZ"),this.h()},l(t){e=d(t,"P",{class:!0});var r=m(e);n=f(r,"Total Supply: "),o=f(r,E),r.forEach(c),a=u(t),l=d(t,"HR",{class:!0}),h=u(t),g=d(t,"P",{class:!0});var s=m(g);y=f(s,"Powered by "),b=d(s,"A",{href:!0});var i=m(b);w=f(i,"Limestone"),i.forEach(c),$=f(s," and "),C=d(s,"A",{href:!0});var v=m(C);x=f(v,"CommunityXYZ"),v.forEach(c),s.forEach(c),this.h()},h(){v(e,"class","svelte-1owgsqs"),v(l,"class","divider svelte-1owgsqs"),v(b,"href","https://limestone.finance/#/"),v(C,"href","https://community.xyz/"),v(g,"class","svelte-1owgsqs")},m(t,r){p(t,e,r),k(e,n),k(e,o),p(t,a,r),p(t,l,r),p(t,h,r),p(t,g,r),k(g,y),k(g,b),k(b,w),k(g,$),k(g,C),k(C,x)},p:I,i:I,o:I,d(t){t&&c(e),t&&c(a),t&&c(l),t&&c(h),t&&c(g)}}}function St(t){let e,n;return e=new R({}),{c(){a(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p:I,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){$(e,t)}}}function At(t){let e,n,C,x,E,I,S,A,N,L,M,j,D,T,F,q,O,P,V,B,W,Y,R,X,Z,U,Q,ct,ut,pt,At,Nt,Lt,Mt,jt;n=new _({props:{update:t[1]}});let Dt={ctx:t,current:null,token:null,hasCatch:!1,pending:K,then:J,catch:G,value:34,blocks:[,,,]};o(t[3](),Dt);let Tt={ctx:t,current:null,token:null,hasCatch:!1,pending:nt,then:et,catch:tt,value:33,blocks:[,,,]};o(t[2],Tt);let Ft={ctx:t,current:null,token:null,hasCatch:!1,pending:at,then:rt,catch:ot,value:32,blocks:[,,,]};o(t[4](),Ft),j=new H({props:{href:"/swap",style:"min-width: unset !important",$$slots:{default:[st]},$$scope:{ctx:t}}});let qt={ctx:t,current:null,token:null,hasCatch:!1,pending:ht,then:lt,catch:it,value:31,blocks:[,,,]};o(t[5](),qt);let Ot={ctx:t,current:null,token:null,hasCatch:!1,pending:ft,then:mt,catch:dt,value:30,blocks:[,,,]};o(t[6](),Ot);let Pt={ctx:t,current:null,token:null,hasCatch:!1,pending:yt,then:gt,catch:vt,value:26,blocks:[,,,]};o(t[7](),Pt);let Vt={ctx:t,current:null,token:null,hasCatch:!1,pending:wt,then:bt,catch:kt,value:25,blocks:[,,,]};o(t[10](),Vt);let Bt={ctx:t,current:null,token:null,hasCatch:!1,pending:xt,then:Ct,catch:$t,value:24,blocks:[,,,]};o(t[8](),Bt);let Wt={ctx:t,current:null,token:null,hasCatch:!1,pending:St,then:It,catch:Et,value:23,blocks:[,,,]};return o(t[9](),Wt),Mt=new z({}),{c(){e=r(),a(n.$$.fragment),C=r(),x=s("div"),E=s("div"),I=s("div"),Dt.block.c(),S=r(),A=s("h1"),Tt.block.c(),N=r(),Ft.block.c(),L=r(),M=s("div"),a(j.$$.fragment),D=r(),T=s("div"),F=s("div"),qt.block.c(),q=r(),O=s("div"),P=s("div"),V=s("h2"),B=i("About"),W=r(),Ot.block.c(),Y=r(),R=s("h2"),X=i("Links"),Z=r(),Pt.block.c(),U=r(),Q=s("div"),ct=s("h2"),ut=i("Metrics"),pt=r(),Vt.block.c(),At=r(),Bt.block.c(),Nt=r(),Wt.block.c(),Lt=r(),a(Mt.$$.fragment),this.h()},l(t){l('[data-svelte="svelte-1l6sdlk"]',document.head).forEach(c),e=u(t),h(n.$$.fragment,t),C=u(t),x=d(t,"DIV",{class:!0});var o=m(x);E=d(o,"DIV",{class:!0});var r=m(E);I=d(r,"DIV",{class:!0});var a=m(I);Dt.block.l(a),a.forEach(c),S=u(r),A=d(r,"H1",{class:!0});var s=m(A);Tt.block.l(s),N=u(s),Ft.block.l(s),s.forEach(c),L=u(r),M=d(r,"DIV",{class:!0});var i=m(M);h(j.$$.fragment,i),i.forEach(c),r.forEach(c),D=u(o),T=d(o,"DIV",{class:!0});var v=m(T);F=d(v,"DIV",{class:!0});var g=m(F);qt.block.l(g),g.forEach(c),q=u(v),O=d(v,"DIV",{class:!0});var p=m(O);P=d(p,"DIV",{class:!0});var y=m(P);V=d(y,"H2",{class:!0});var k=m(V);B=f(k,"About"),k.forEach(c),W=u(y),Ot.block.l(y),Y=u(y),R=d(y,"H2",{style:!0,class:!0});var b=m(R);X=f(b,"Links"),b.forEach(c),Z=u(y),Pt.block.l(y),y.forEach(c),U=u(p),Q=d(p,"DIV",{class:!0});var w=m(Q);ct=d(w,"H2",{class:!0});var $=m(ct);ut=f($,"Metrics"),$.forEach(c),pt=u(w),Vt.block.l(w),At=u(w),Bt.block.l(w),Nt=u(w),Wt.block.l(w),w.forEach(c),p.forEach(c),v.forEach(c),o.forEach(c),Lt=u(t),h(Mt.$$.fragment,t),this.h()},h(){document.title="Verto â€” Token",v(I,"class","logo svelte-1owgsqs"),v(A,"class","title svelte-1owgsqs"),v(M,"class","cta svelte-1owgsqs"),v(E,"class","token-head svelte-1owgsqs"),v(F,"class","graph-wrapper svelte-1owgsqs"),v(V,"class","svelte-1owgsqs"),g(R,"margin-top","2em"),v(R,"class","svelte-1owgsqs"),v(P,"class","description"),v(ct,"class","svelte-1owgsqs"),v(Q,"class","stats svelte-1owgsqs"),v(O,"class","content svelte-1owgsqs"),v(T,"class","token-body"),v(x,"class","token svelte-1owgsqs")},m(t,o){p(t,e,o),y(n,t,o),p(t,C,o),p(t,x,o),k(x,E),k(E,I),Dt.block.m(I,Dt.anchor=null),Dt.mount=()=>I,Dt.anchor=null,k(E,S),k(E,A),Tt.block.m(A,Tt.anchor=null),Tt.mount=()=>A,Tt.anchor=N,k(A,N),Ft.block.m(A,Ft.anchor=null),Ft.mount=()=>A,Ft.anchor=null,k(E,L),k(E,M),y(j,M,null),k(x,D),k(x,T),k(T,F),qt.block.m(F,qt.anchor=null),qt.mount=()=>F,qt.anchor=null,k(T,q),k(T,O),k(O,P),k(P,V),k(V,B),k(P,W),Ot.block.m(P,Ot.anchor=null),Ot.mount=()=>P,Ot.anchor=Y,k(P,Y),k(P,R),k(R,X),k(P,Z),Pt.block.m(P,Pt.anchor=null),Pt.mount=()=>P,Pt.anchor=null,k(O,U),k(O,Q),k(Q,ct),k(ct,ut),k(Q,pt),Vt.block.m(Q,Vt.anchor=null),Vt.mount=()=>Q,Vt.anchor=At,k(Q,At),Bt.block.m(Q,Bt.anchor=null),Bt.mount=()=>Q,Bt.anchor=Nt,k(Q,Nt),Wt.block.m(Q,Wt.anchor=null),Wt.mount=()=>Q,Wt.anchor=null,p(t,Lt,o),y(Mt,t,o),jt=!0},p(e,n){{const o=(t=e).slice();o[34]=Dt.resolved,Dt.block.p(o,n)}{const e=t.slice();e[33]=Tt.resolved,Tt.block.p(e,n)}{const e=t.slice();e[32]=Ft.resolved,Ft.block.p(e,n)}const o={};16&n[1]&&(o.$$scope={dirty:n,ctx:t}),j.$set(o);{const e=t.slice();e[31]=qt.resolved,qt.block.p(e,n)}{const e=t.slice();e[30]=Ot.resolved,Ot.block.p(e,n)}{const e=t.slice();e[26]=Pt.resolved,Pt.block.p(e,n)}{const e=t.slice();e[25]=Vt.resolved,Vt.block.p(e,n)}{const e=t.slice();e[24]=Bt.resolved,Bt.block.p(e,n)}{const e=t.slice();e[23]=Wt.resolved,Wt.block.p(e,n)}},i(t){jt||(b(n.$$.fragment,t),b(Dt.block),b(Tt.block),b(Ft.block),b(j.$$.fragment,t),b(qt.block),b(Ot.block),b(Pt.block),b(Vt.block),b(Bt.block),b(Wt.block),b(Mt.$$.fragment,t),jt=!0)},o(t){w(n.$$.fragment,t);for(let t=0;t<3;t+=1){const e=Dt.blocks[t];w(e)}for(let t=0;t<3;t+=1){const e=Tt.blocks[t];w(e)}for(let t=0;t<3;t+=1){const e=Ft.blocks[t];w(e)}w(j.$$.fragment,t);for(let t=0;t<3;t+=1){const e=qt.blocks[t];w(e)}for(let t=0;t<3;t+=1){const e=Ot.blocks[t];w(e)}for(let t=0;t<3;t+=1){const e=Pt.blocks[t];w(e)}for(let t=0;t<3;t+=1){const e=Vt.blocks[t];w(e)}for(let t=0;t<3;t+=1){const e=Bt.blocks[t];w(e)}for(let t=0;t<3;t+=1){const e=Wt.blocks[t];w(e)}w(Mt.$$.fragment,t),jt=!1},d(t){t&&c(e),$(n,t),t&&c(C),t&&c(x),Dt.block.d(),Dt.token=null,Dt=null,Tt.block.d(),Tt.token=null,Tt=null,Ft.block.d(),Ft.token=null,Ft=null,$(j),qt.block.d(),qt.token=null,qt=null,Ot.block.d(),Ot.token=null,Ot=null,Pt.block.d(),Pt.token=null,Pt=null,Vt.block.d(),Vt.token=null,Vt=null,Bt.block.d(),Bt.token=null,Bt=null,Wt.block.d(),Wt.token=null,Wt=null,t&&c(Lt),$(Mt,t)}}}const Nt=function(t){let e=t.chart.ctx.createLinearGradient(0,0,t.chart.width,t.chart.height);return e.addColorStop(0,"#E698E8"),e.addColorStop(1,"#8D5FBC"),e},Lt=function(t){let e=t.chart.ctx.createLinearGradient(0,0,t.chart.width,t.chart.height);return e.addColorStop(0,"#E698E8"),e.addColorStop(1,"#8D5FBC"),e};function Mt(t,e,n){let o;C(t,P,(t=>n(15,o=t)));var r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function s(t){try{l(o.next(t))}catch(t){a(t)}}function i(t){try{l(o.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,i)}l((o=o.apply(t,e||[])).next())}))};let a=new B;const s=O.init({host:"arweave.net",port:443,protocol:"https",timeout:2e4,logging:!1});let i,l="",c=null;{const t=new URLSearchParams(window.location.search);null===t.get("id")&&x("/tokens"),l=t.get("id")}E((()=>r(void 0,void 0,void 0,(function*(){a=new B(JSON.parse(o))}))));const u=function(){return r(this,void 0,void 0,(function*(){return yield function(){return r(this,void 0,void 0,(function*(){c=new U(s),yield c.setCommunityTx(l),i=yield c.getState()}))}(),i.name}))}();function h(){return r(this,void 0,void 0,(function*(){yield u;return(yield a.latestPrice(l))*(yield function(){return r(this,void 0,void 0,(function*(){const t=(yield s.network.getInfo()).height-50,e=(yield W(`\n      {\n        transactions(\n          tags: [\n            { name: "app", values: "Limestone" }\n            { name: "type", values: "data-latest" }\n            { name: "token", values: "AR" }\n            { name: "version", values: "0.005" }\n          ]\n          block: { min: ${t} }\n          first: 1\n        ) {\n          edges {\n            node {\n              tags {\n                name\n                value\n              }\n            }\n          }\n        }\n      }\n      `)).data.transactions.edges;if(e[0]){let t,n=e[0].node.tags;for(let e=0;e<n.length;e++)if("value"===n[e].name)return t=parseFloat(n[e].value),t}}))}())}))}function d(){return r(this,void 0,void 0,(function*(){yield u;let t=0;for(const e of Object.keys(i.balances))t+=i.balances[e];return t}))}function m(){return r(this,void 0,void 0,(function*(){yield u;const t=Object.keys(i.vault);let e=0;for(let n=0,o=t.length;n<o;n++)e+=i.vault[t[n]].map((t=>t.balance)).reduce(((t,e)=>t+e),0);return e+(yield d())}))}return[l,()=>r(void 0,void 0,void 0,(function*(){a=new B(JSON.parse(o))})),u,function(){return r(this,void 0,void 0,(function*(){return yield u,i.settings.get("communityLogo")}))},function(){return r(this,void 0,void 0,(function*(){return yield u,i.ticker}))},function(){return r(this,void 0,void 0,(function*(){yield u;const t=yield a.price(l);let e=t.dates,n=t.prices;const o=n[0],r=n[n.length-1];let s;const i=(r-o)/o*100;let c;return r>=o?(s="#00D46E",c="+"+i.toFixed(2)+"%"):(s="#FF375D",c=i.toFixed(2)+"%"),{dates:e,prices:n,latestPrice:r.toFixed(4),color:s,percentage:c}}))},function(){return r(this,void 0,void 0,(function*(){return yield u,i.settings.get("communityDescription")||"No Community Description"}))},function(){return r(this,void 0,void 0,(function*(){yield u;const t=yield function(){return r(this,void 0,void 0,(function*(){return yield u,i.settings.get("communityAppUrl")||""}))}(),e=i.settings.get("communityDiscussionLinks");return e.unshift(t),e}))},d,m,function(){return r(this,void 0,void 0,(function*(){return yield u,(yield h())*(yield m())}))},t=>isNaN(t)]}export default class extends t{constructor(t){super(),e(this,t,Mt,At,n,{},[-1,-1])}}
